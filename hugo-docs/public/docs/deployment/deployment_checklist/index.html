<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Deployment Checklist - Infrastructure Improvements | Home Server Documentation</title><meta name=description content="Deployment checklist for infrastructure improvements"><meta property="og:url" content="https://docs.antoineglacet.com/docs/deployment/deployment_checklist/"><meta property="og:site_name" content="Home Server Documentation"><meta property="og:title" content="Deployment Checklist - Infrastructure Improvements"><meta property="og:description" content="Deployment checklist for infrastructure improvements"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta itemprop=name content="Deployment Checklist - Infrastructure Improvements"><meta itemprop=description content="Deployment checklist for infrastructure improvements"><meta itemprop=wordCount content="1156"><meta name=twitter:card content="summary"><meta name=twitter:title content="Deployment Checklist - Infrastructure Improvements"><meta name=twitter:description content="Deployment checklist for infrastructure improvements"><link rel=preload href=/scss/main.min.6d849f713d8c25ed95d783569522ad6e1604c48142bc1d1ab44b4a15795b3046.css as=style integrity="sha256-bYSfcT2MJe2V14NWlSKtbhYExIFCvB0atEtKFXlbMEY=" crossorigin=anonymous><link href=/scss/main.min.6d849f713d8c25ed95d783569522ad6e1604c48142bc1d1ab44b4a15795b3046.css rel=stylesheet integrity="sha256-bYSfcT2MJe2V14NWlSKtbhYExIFCvB0atEtKFXlbMEY=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script></head><body class=td-page><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="td-navbar-container container-fluid flex-column flex-md-row"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"></span><span class=navbar-brand__name>Home Server Documentation</span></a><div class="td-navbar-nav-scroll td-navbar-nav-scroll--indicator" id=main_navbar><div class="scroll-indicator scroll-left"></div><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/docs/><span>Documentation</span></a></li><li class=nav-item><a class="nav-link active" href=/docs/><span>Docs</span></a></li><li class=nav-item><a class=nav-link href=https://homepage.antoineglacet.com target=_blank rel=noopener><span>Homepage</span></a></li></ul><div class="scroll-indicator scroll-right"></div></div><div class="d-none d-lg-block td-navbar__search"></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main data-bs-spy=scroll data-bs-target=.td-toc data-bs-root-margin="0px 0px -10%"><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><script>$(function(){$("#td-section-nav a").removeClass("active"),$("#td-section-nav #m-docsdeploymentdeployment_checklist").addClass("active"),$("#td-section-nav #m-docsdeploymentdeployment_checklist-li span").addClass("td-sidebar-nav-active-item"),$("#td-section-nav #m-docsdeploymentdeployment_checklist").parents("li").addClass("active-path"),$("#td-section-nav li.active-path").addClass("show"),$("#td-section-nav li.active-path").children("input").prop("checked",!0),$("#td-section-nav #m-docsdeploymentdeployment_checklist-li").siblings("li").addClass("show"),$("#td-section-nav #m-docsdeploymentdeployment_checklist-li").children("ul").children("li").addClass("show"),$("#td-sidebar-menu").toggleClass("d-none")})</script><div id=td-sidebar-menu class="td-sidebar__inner d-none"><form class="td-sidebar__search d-flex align-items-center"><button class="btn btn-link td-sidebar__toggle" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="td-sidebar-nav collapse foldable-nav" id=td-section-nav><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docs-li><a href=/docs/ title=Documentation class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Docs</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsoperations-li><input type=checkbox id=m-docsoperations-check>
<label for=m-docsoperations-check><a href=/docs/operations/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsoperations><span>Operations</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsoperationsoperating-li><input type=checkbox id=m-docsoperationsoperating-check>
<label for=m-docsoperationsoperating-check><a href=/docs/operations/operating/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsoperating><span>Operating Guide</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsoperationsquick_start-li><input type=checkbox id=m-docsoperationsquick_start-check>
<label for=m-docsoperationsquick_start-check><a href=/docs/operations/quick_start/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsquick_start><span>Quick Start: Fix SSH Lag & LAN Latency</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsoperationsperformance-tuning-li><input type=checkbox id=m-docsoperationsperformance-tuning-check>
<label for=m-docsoperationsperformance-tuning-check><a href=/docs/operations/performance-tuning/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsperformance-tuning><span>Performance Tuning Guide</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsoperationsperformance_optimization-li><input type=checkbox id=m-docsoperationsperformance_optimization-check>
<label for=m-docsoperationsperformance_optimization-check><a href=/docs/operations/performance_optimization/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsperformance_optimization><span>Performance Optimization Guide</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsinfrastructure-li><input type=checkbox id=m-docsinfrastructure-check>
<label for=m-docsinfrastructure-check><a href=/docs/infrastructure/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsinfrastructure><span>Infrastructure</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsinfrastructuretraefik-li><input type=checkbox id=m-docsinfrastructuretraefik-check>
<label for=m-docsinfrastructuretraefik-check><a href=/docs/infrastructure/traefik/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsinfrastructuretraefik><span>Traefik - Reverse Proxy & TLS</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsinfrastructureauthentik-li><input type=checkbox id=m-docsinfrastructureauthentik-check>
<label for=m-docsinfrastructureauthentik-check><a href=/docs/infrastructure/authentik/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsinfrastructureauthentik><span>Authentik - SSO & Authentication</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsmonitoring-li><input type=checkbox id=m-docsmonitoring-check>
<label for=m-docsmonitoring-check><a href=/docs/monitoring/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsmonitoring><span>Monitoring</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsmonitoringmonitoring-li><input type=checkbox id=m-docsmonitoringmonitoring-check>
<label for=m-docsmonitoringmonitoring-check><a href=/docs/monitoring/monitoring/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsmonitoringmonitoring><span>Monitoring & Observability</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsmonitoringgrafana-setup-li><input type=checkbox id=m-docsmonitoringgrafana-setup-check>
<label for=m-docsmonitoringgrafana-setup-check><a href=/docs/monitoring/grafana-setup/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsmonitoringgrafana-setup><span>Grafana Setup Guide</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docstroubleshooting-li><input type=checkbox id=m-docstroubleshooting-check>
<label for=m-docstroubleshooting-check><a href=/docs/troubleshooting/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docstroubleshooting><span>Troubleshooting</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstroubleshootingtroubleshooting-li><input type=checkbox id=m-docstroubleshootingtroubleshooting-check>
<label for=m-docstroubleshootingtroubleshooting-check><a href=/docs/troubleshooting/troubleshooting/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstroubleshootingtroubleshooting><span>Troubleshooting Guide</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsdeployment-li><input type=checkbox id=m-docsdeployment-check>
<label for=m-docsdeployment-check><a href=/docs/deployment/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsdeployment><span>Deployment</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdeploymentdeployment_checklist-li><input type=checkbox id=m-docsdeploymentdeployment_checklist-check>
<label for=m-docsdeploymentdeployment_checklist-check><a href=/docs/deployment/deployment_checklist/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdeploymentdeployment_checklist><span>Deployment Checklist - Infrastructure Improvements</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdeploymentpost-commit-steps-li><input type=checkbox id=m-docsdeploymentpost-commit-steps-check>
<label for=m-docsdeploymentpost-commit-steps-check><a href=/docs/deployment/post-commit-steps/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdeploymentpost-commit-steps><span>Post-Commit Setup Steps</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdeploymentdeployment_notes-li><input type=checkbox id=m-docsdeploymentdeployment_notes-check>
<label for=m-docsdeploymentdeployment_notes-check><a href=/docs/deployment/deployment_notes/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdeploymentdeployment_notes><span>Deployment Notes - 2026-01-16</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdeploymenthugo-site-setup-li><input type=checkbox id=m-docsdeploymenthugo-site-setup-check>
<label for=m-docsdeploymenthugo-site-setup-check><a href=/docs/deployment/hugo-site-setup/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdeploymenthugo-site-setup><span>Hugo Documentation Site - Setup Guide</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdeploymentalerting_migration-li><input type=checkbox id=m-docsdeploymentalerting_migration-check>
<label for=m-docsdeploymentalerting_migration-check><a href=/docs/deployment/alerting_migration/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdeploymentalerting_migration><span>Alerting Migration to Grafana</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdeploymentreadme-li><input type=checkbox id=m-docsdeploymentreadme-check>
<label for=m-docsdeploymentreadme-check><a href=/docs/deployment/readme/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdeploymentreadme><span></span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsplanning-li><input type=checkbox id=m-docsplanning-check>
<label for=m-docsplanning-check><a href=/docs/planning/ title="Planning & Status" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsplanning><span>Planning</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsplanningimplementation_status-li><input type=checkbox id=m-docsplanningimplementation_status-check>
<label for=m-docsplanningimplementation_status-check><a href=/docs/planning/implementation_status/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsplanningimplementation_status><span>Implementation Status - Home Server Improvements</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsplanningnext_steps-li><input type=checkbox id=m-docsplanningnext_steps-check>
<label for=m-docsplanningnext_steps-check><a href=/docs/planning/next_steps/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsplanningnext_steps><span>Next Steps - Alerting Migration Testing</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsplanningsecurity_remediation-li><input type=checkbox id=m-docsplanningsecurity_remediation-check>
<label for=m-docsplanningsecurity_remediation-check><a href=/docs/planning/security_remediation/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsplanningsecurity_remediation><span>Security Remediation: Discord Webhook Leak</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsplanningreadme-li><input type=checkbox id=m-docsplanningreadme-check>
<label for=m-docsplanningreadme-check><a href=/docs/planning/readme/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsplanningreadme><span></span></a></label></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"></div><div class=td-toc data-proofer-ignore><div class=td-toc-title><span class=td-toc-title__text>On this page</span>
<a class=td-toc-title__link title="Top of page" href=#></a></div><nav id=TableOfContents><ul><li><a href=#-completed---no-action-needed>‚úÖ COMPLETED - No Action Needed</a></li><li><a href=#-required-before-deployment>üî¥ REQUIRED BEFORE DEPLOYMENT</a><ul><li><a href=#1-add-discord-webhook-to-env>1. Add Discord Webhook to .env</a></li></ul></li><li><a href=#-deployment-process>üöÄ DEPLOYMENT PROCESS</a><ul><li><a href=#step-1-verify-prerequisites>Step 1: Verify Prerequisites</a></li><li><a href=#step-2-pull-new-images>Step 2: Pull New Images</a></li><li><a href=#step-3-restart-services>Step 3: Restart Services</a></li><li><a href=#step-4-verify-deployment>Step 4: Verify Deployment</a></li></ul></li><li><a href=#-post-deployment-verification>üìä POST-DEPLOYMENT VERIFICATION</a><ul><li><a href=#1-grafana-datasources-5-minutes>1. Grafana Datasources (5 minutes)</a></li><li><a href=#2-import-dashboards-10-minutes>2. Import Dashboards (10 minutes)</a></li><li><a href=#3-prometheus-targets-2-minutes>3. Prometheus Targets (2 minutes)</a></li><li><a href=#4-alertmanager-5-minutes>4. Alertmanager (5 minutes)</a></li><li><a href=#5-security-headers-2-minutes>5. Security Headers (2 minutes)</a></li><li><a href=#6-resource-limits-ongoing>6. Resource Limits (Ongoing)</a></li><li><a href=#7-swap-usage-24-hours>7. Swap Usage (24 hours)</a></li></ul></li><li><a href=#-troubleshooting>‚ö†Ô∏è TROUBLESHOOTING</a><ul><li><a href=#services-wont-start>Services Won&rsquo;t Start</a></li><li><a href=#grafana-dashboards-not-loading>Grafana Dashboards Not Loading</a></li><li><a href=#prometheus-not-scraping>Prometheus Not Scraping</a></li><li><a href=#alertmanager-not-sending-alerts>Alertmanager Not Sending Alerts</a></li><li><a href=#resource-limits-too-low-oom-kills>Resource Limits Too Low (OOM Kills)</a></li></ul></li><li><a href=#-monitoring-your-improvements>üìà MONITORING YOUR IMPROVEMENTS</a><ul><li><a href=#swap-usage-trending-down>Swap Usage Trending Down</a></li><li><a href=#resource-limits-working>Resource Limits Working</a></li><li><a href=#security-headers-active>Security Headers Active</a></li></ul></li><li><a href=#-success-criteria>üéØ SUCCESS CRITERIA</a></li><li><a href=#-rollback-procedure>üîÑ ROLLBACK PROCEDURE</a></li><li><a href=#-next-steps>üìû NEXT STEPS</a></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/docs/>Docs</a></li><li class=breadcrumb-item><a href=/docs/deployment/>Deployment</a></li><li class="breadcrumb-item active" aria-current=page>Deployment Checklist - Infrastructure Improvements</li></ol></nav><div class=td-content><h1>Deployment Checklist - Infrastructure Improvements</h1><div class=lead>Deployment checklist for infrastructure improvements</div><header class=article-meta></header><p><strong>Date:</strong> 2026-01-16
<strong>Commits:</strong> 568b47d + 3e81ad9</p><hr><h2 id=-completed---no-action-needed>‚úÖ COMPLETED - No Action Needed</h2><ul><li>‚úÖ Swappiness reduced to 10 (you already did this!)</li><li>‚úÖ All code changes committed</li><li>‚úÖ Docker Compose configuration validated (syntax OK)</li><li>‚úÖ Resource limits configured</li><li>‚úÖ Security headers configured</li><li>‚úÖ Alertmanager configured</li><li>‚úÖ Grafana auto-provisioning configured</li><li>‚úÖ Image versions pinned</li></ul><hr><h2 id=-required-before-deployment>üî¥ REQUIRED BEFORE DEPLOYMENT</h2><h3 id=1-add-discord-webhook-to-env>1. Add Discord Webhook to .env</h3><p>You need to add your Discord webhook URL to the <code>.env</code> file:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Edit your .env file</span>
</span></span><span style=display:flex><span>nano .env
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Add this line (replace with your actual webhook URL from Uptime Kuma):</span>
</span></span><span style=display:flex><span><span style=color:#000>DISCORD_WEBHOOK_URL</span><span style=color:#ce5c00;font-weight:700>=</span>https://discord.com/api/webhooks/YOUR_WEBHOOK_ID/YOUR_TOKEN/slack
</span></span></code></pre></div><p><strong>IMPORTANT:</strong> Add <code>/slack</code> to the end of your Discord webhook URL for Alertmanager compatibility.</p><p><strong>To find your webhook:</strong></p><ul><li>Check Uptime Kuma notification settings</li><li>Or create a new webhook in Discord: Server Settings ‚Üí Integrations ‚Üí Webhooks</li></ul><hr><h2 id=-deployment-process>üöÄ DEPLOYMENT PROCESS</h2><h3 id=step-1-verify-prerequisites>Step 1: Verify Prerequisites</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Confirm swappiness is set</span>
</span></span><span style=display:flex><span>cat /proc/sys/vm/swappiness
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Should output: 10</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Confirm Discord webhook is in .env</span>
</span></span><span style=display:flex><span>grep DISCORD_WEBHOOK_URL .env
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Should show your webhook URL</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Verify configuration</span>
</span></span><span style=display:flex><span>docker compose config &gt; /dev/null <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> <span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;‚úì Config valid&#34;</span> <span style=color:#ce5c00;font-weight:700>||</span> <span style=color:#204a87>echo</span> <span style=color:#4e9a06>&#34;‚úó Error&#34;</span>
</span></span></code></pre></div><h3 id=step-2-pull-new-images>Step 2: Pull New Images</h3><p><strong>This will download:</strong></p><ul><li>Alertmanager (new service)</li><li>Updated versions of pinned images</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker compose pull
</span></span></code></pre></div><p><strong>Expected download size:</strong> ~500MB-1GB depending on what&rsquo;s cached</p><h3 id=step-3-restart-services>Step 3: Restart Services</h3><p><strong>Option A: Restart Everything (Recommended)</strong></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker compose up -d
</span></span></code></pre></div><p><strong>Option B: Restart Only Changed Services</strong></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Restart services with resource limits</span>
</span></span><span style=display:flex><span>docker compose up -d authentik-server radarr sonarr flaresolverr bazarr
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Restart monitoring stack</span>
</span></span><span style=display:flex><span>docker compose up -d prometheus grafana traefik
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Start new Alertmanager</span>
</span></span><span style=display:flex><span>docker compose up -d alertmanager
</span></span></code></pre></div><h3 id=step-4-verify-deployment>Step 4: Verify Deployment</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Check all containers are running</span>
</span></span><span style=display:flex><span>docker compose ps
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Check for errors</span>
</span></span><span style=display:flex><span>docker compose logs --tail<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>50</span> alertmanager
</span></span><span style=display:flex><span>docker compose logs --tail<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>50</span> traefik
</span></span><span style=display:flex><span>docker compose logs --tail<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>50</span> grafana
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Run health check</span>
</span></span><span style=display:flex><span>./scripts/health-check.sh
</span></span></code></pre></div><hr><h2 id=-post-deployment-verification>üìä POST-DEPLOYMENT VERIFICATION</h2><h3 id=1-grafana-datasources-5-minutes>1. Grafana Datasources (5 minutes)</h3><p>Visit: http://localhost:3000 (or <a href=https://grafana.your-domain.com>https://grafana.your-domain.com</a>)</p><p><strong>Check datasources:</strong></p><ol><li>Go to Configuration ‚Üí Data Sources</li><li>You should see:<ul><li>‚úÖ Prometheus (green check, default)</li><li>‚úÖ Loki (green check)</li></ul></li></ol><p><strong>If datasources are missing:</strong></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Check Grafana logs</span>
</span></span><span style=display:flex><span>docker compose logs grafana <span style=color:#000;font-weight:700>|</span> grep -i datasource
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Restart Grafana</span>
</span></span><span style=display:flex><span>docker compose restart grafana
</span></span></code></pre></div><h3 id=2-import-dashboards-10-minutes>2. Import Dashboards (10 minutes)</h3><p>In Grafana, go to Dashboards ‚Üí Import and add these:</p><p><strong>Essential Dashboards:</strong></p><ol><li><p><strong>Node Exporter Full</strong> (ID: 1860)</p><ul><li>Shows: CPU, RAM, <strong>swap usage</strong>, disk space</li><li><strong>This will show your swap improvement!</strong></li></ul></li><li><p><strong>Docker Container Metrics</strong> (ID: 179)</p><ul><li>Shows: Container resource usage</li><li>Verify resource limits are working</li></ul></li><li><p><strong>Traefik</strong> (ID: 12250)</p><ul><li>Shows: HTTP requests, status codes</li><li>Verify metrics endpoint is working</li></ul></li><li><p><strong>Loki Logs</strong> (ID: 12611)</p><ul><li>Shows: Container logs</li><li>Search and filter logs</li></ul></li></ol><h3 id=3-prometheus-targets-2-minutes>3. Prometheus Targets (2 minutes)</h3><p>Visit: http://localhost:9090/targets</p><p><strong>All should be UP:</strong></p><ul><li>‚úÖ prometheus (1/1 up)</li><li>‚úÖ node_exporter (1/1 up)</li><li>‚úÖ cadvisor (1/1 up)</li><li>‚úÖ traefik (1/1 up)</li><li>‚úÖ loki (1/1 up)</li></ul><p><strong>If traefik is DOWN:</strong></p><ul><li>Metrics endpoint needs to be enabled (it should be in docker-compose.yml already)</li><li>Check: <code>curl http://localhost:8082/metrics</code></li></ul><h3 id=4-alertmanager-5-minutes>4. Alertmanager (5 minutes)</h3><p>Visit: http://localhost:9093 (or <a href=https://alertmanager.your-domain.com>https://alertmanager.your-domain.com</a>)</p><p><strong>Test Discord webhook:</strong></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Send test alert</span>
</span></span><span style=display:flex><span>curl -X POST http://localhost:9093/api/v1/alerts -d <span style=color:#4e9a06>&#39;[{
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  &#34;labels&#34;: {
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    &#34;alertname&#34;: &#34;TestAlert&#34;,
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    &#34;severity&#34;: &#34;info&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  },
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  &#34;annotations&#34;: {
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>    &#34;summary&#34;: &#34;Test alert from Alertmanager - if you see this in Discord, it works!&#34;
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>  }
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>}]&#39;</span>
</span></span></code></pre></div><p><strong>Check Discord:</strong> You should receive a message in your alerts channel</p><p><strong>If no Discord message:</strong></p><ol><li>Check Alertmanager logs: <code>docker compose logs alertmanager</code></li><li>Verify webhook URL in .env is correct</li><li>Ensure <code>/slack</code> is at the end of the URL</li></ol><h3 id=5-security-headers-2-minutes>5. Security Headers (2 minutes)</h3><p>Test from external domain:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -I https://your-domain.com
</span></span></code></pre></div><p><strong>Should see headers:</strong></p><pre tabindex=0><code>X-Frame-Options: DENY
X-Content-Type-Options: nosniff
X-XSS-Protection: 1; mode=block
Strict-Transport-Security: max-age=31536000
Referrer-Policy: strict-origin-when-cross-origin
</code></pre><h3 id=6-resource-limits-ongoing>6. Resource Limits (Ongoing)</h3><p>Monitor containers with limits:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker stats
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Watch for these containers:</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># - authentik-server (should stay under 768MB)</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># - radarr (should stay under 512MB)</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># - sonarr (should stay under 384MB)</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># - flaresolverr (should stay under 256MB)</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># - bazarr (should stay under 256MB)</span>
</span></span></code></pre></div><p><strong>If any container is killed (OOM):</strong></p><ol><li>Check logs: <code>docker compose logs &lt;service-name></code></li><li>Increase limit in docker-compose.yml</li><li>Restart: <code>docker compose up -d &lt;service-name></code></li></ol><h3 id=7-swap-usage-24-hours>7. Swap Usage (24 hours)</h3><p>Monitor swap improvement:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Check immediately</span>
</span></span><span style=display:flex><span>free -h
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Check after 24 hours - should be much lower</span>
</span></span><span style=display:flex><span>free -h
</span></span></code></pre></div><p><strong>Expected:</strong></p><ul><li>Before: 1.9GB swap used</li><li>After: &lt;500MB swap used</li></ul><hr><h2 id=-troubleshooting>‚ö†Ô∏è TROUBLESHOOTING</h2><h3 id=services-wont-start>Services Won&rsquo;t Start</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Check docker compose logs</span>
</span></span><span style=display:flex><span>docker compose logs --tail<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>100</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Check specific service</span>
</span></span><span style=display:flex><span>docker compose logs &lt;service-name&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Restart specific service</span>
</span></span><span style=display:flex><span>docker compose restart &lt;service-name&gt;
</span></span></code></pre></div><h3 id=grafana-dashboards-not-loading>Grafana Dashboards Not Loading</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Restart Grafana</span>
</span></span><span style=display:flex><span>docker compose restart grafana
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Check provisioning</span>
</span></span><span style=display:flex><span>docker compose <span style=color:#204a87>exec</span> grafana ls -la /etc/grafana/provisioning/datasources/
</span></span><span style=display:flex><span>docker compose <span style=color:#204a87>exec</span> grafana ls -la /etc/grafana/provisioning/dashboards/
</span></span></code></pre></div><h3 id=prometheus-not-scraping>Prometheus Not Scraping</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Check Prometheus config</span>
</span></span><span style=display:flex><span>docker compose <span style=color:#204a87>exec</span> prometheus promtool check config /etc/prometheus/prometheus.yml
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Check targets</span>
</span></span><span style=display:flex><span>curl http://localhost:9090/api/v1/targets <span style=color:#000;font-weight:700>|</span> jq <span style=color:#4e9a06>&#39;.data.activeTargets&#39;</span>
</span></span></code></pre></div><h3 id=alertmanager-not-sending-alerts>Alertmanager Not Sending Alerts</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Check logs</span>
</span></span><span style=display:flex><span>docker compose logs alertmanager
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Verify config</span>
</span></span><span style=display:flex><span>docker compose <span style=color:#204a87>exec</span> alertmanager amtool check-config /etc/alertmanager/alertmanager.yml
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Test webhook manually</span>
</span></span><span style=display:flex><span>curl -X POST <span style=color:#4e9a06>&#34;YOUR_DISCORD_WEBHOOK_URL&#34;</span> -H <span style=color:#4e9a06>&#34;Content-Type: application/json&#34;</span> -d <span style=color:#4e9a06>&#39;{&#34;text&#34;:&#34;Test from Alertmanager&#34;}&#39;</span>
</span></span></code></pre></div><h3 id=resource-limits-too-low-oom-kills>Resource Limits Too Low (OOM Kills)</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Check for OOM kills</span>
</span></span><span style=display:flex><span>sudo dmesg <span style=color:#000;font-weight:700>|</span> grep -i oom
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Increase limits in docker-compose.yml and restart</span>
</span></span><span style=display:flex><span>docker compose up -d &lt;service-name&gt;
</span></span></code></pre></div><hr><h2 id=-monitoring-your-improvements>üìà MONITORING YOUR IMPROVEMENTS</h2><h3 id=swap-usage-trending-down>Swap Usage Trending Down</h3><p>After deployment, you should see:</p><ul><li><strong>Immediate:</strong> Swap stops growing</li><li><strong>6 hours:</strong> Swap decreases to &lt;1GB</li><li><strong>24 hours:</strong> Swap stable at &lt;500MB</li><li><strong>Result:</strong> SSH sessions respond instantly</li></ul><p>View in Grafana:</p><ul><li>Dashboard: Node Exporter Full</li><li>Panel: Memory Usage</li><li>Query: <code>(node_memory_SwapTotal_bytes - node_memory_SwapFree_bytes) / 1024 / 1024 / 1024</code></li></ul><h3 id=resource-limits-working>Resource Limits Working</h3><p>View in Grafana:</p><ul><li>Dashboard: Docker Container Metrics</li><li>Check each service stays within limits</li><li>No OOM kills in logs</li></ul><h3 id=security-headers-active>Security Headers Active</h3><ul><li>All HTTPS responses include security headers</li><li>Traefik metrics show reduced attack surface</li><li>Rate limiting prevents abuse</li></ul><hr><h2 id=-success-criteria>üéØ SUCCESS CRITERIA</h2><p>After 24 hours, you should have:</p><ul><li>‚úÖ Swap usage &lt;500MB (down from 1.9GB)</li><li>‚úÖ All Prometheus targets UP</li><li>‚úÖ Grafana showing 4+ dashboards</li><li>‚úÖ Alertmanager sending test alerts to Discord</li><li>‚úÖ Security headers on all HTTPS responses</li><li>‚úÖ No container OOM kills</li><li>‚úÖ All services running healthy</li><li>‚úÖ SSH sessions respond instantly</li></ul><hr><h2 id=-rollback-procedure>üîÑ ROLLBACK PROCEDURE</h2><p>If anything goes wrong:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Option 1: Revert last commit</span>
</span></span><span style=display:flex><span>git revert HEAD
</span></span><span style=display:flex><span>docker compose pull
</span></span><span style=display:flex><span>docker compose up -d
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Option 2: Revert both commits</span>
</span></span><span style=display:flex><span>git revert HEAD~1..HEAD
</span></span><span style=display:flex><span>docker compose pull
</span></span><span style=display:flex><span>docker compose up -d
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Option 3: Hard reset (loses commits)</span>
</span></span><span style=display:flex><span>git reset --hard HEAD~2
</span></span><span style=display:flex><span>docker compose pull
</span></span><span style=display:flex><span>docker compose up -d
</span></span></code></pre></div><p><strong>Note:</strong> Your swappiness change (vm.swappiness=10) will persist through rollback - that&rsquo;s good!</p><hr><h2 id=-next-steps>üìû NEXT STEPS</h2><p>After successful deployment:</p><ol><li><p><strong>Monitor for 24 hours</strong></p><ul><li>Watch swap usage decrease</li><li>Check for any OOM kills</li><li>Verify alerts are working</li></ul></li><li><p><strong>Create Grafana alerts</strong> (optional)</p><ul><li>Set up alerts for critical thresholds</li><li>Route through Alertmanager to Discord</li></ul></li><li><p><strong>Fine-tune resource limits</strong> (if needed)</p><ul><li>Increase limits if services are killed</li><li>Decrease if usage is much lower than limit</li></ul></li><li><p><strong>Add Vaultwarden</strong> (future enhancement)</p><ul><li>Secret management server</li><li>Migrate secrets from .env</li></ul></li></ol><hr><p><strong>Questions? Check:</strong></p><ul><li><code>IMPLEMENTATION_STATUS.md</code> - Full implementation details</li><li><code>docs/post-commit-steps.md</code> - Additional configuration steps</li><li><code>docs/performance-tuning.md</code> - Swap optimization details</li><li><code>docs/grafana-setup.md</code> - Grafana configuration help</li></ul><p><strong>Ready to deploy?</strong> ‚úÖ Complete steps 1-4 above!</p></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=Homepage aria-label=Homepage><a target=_blank rel=noopener href=https://homepage.antoineglacet.com aria-label=Homepage><i class="fa fa-home"></i></a></li></ul></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"><span class=td-footer__copyright>&copy;
2026
<span class=td-footer__authors>Antoine Glacet</span></span><span class=td-footer__all_rights_reserved>All Rights Reserved</span></div></div></div></footer></div><script src=/js/main.min.258190f24d50bde9095e369c0cd7315407f95e1da5f39472b3850b40279a9e08.js integrity="sha256-JYGQ8k1QvekJXjacDNcxVAf5Xh2l85Rys4ULQCeangg=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>