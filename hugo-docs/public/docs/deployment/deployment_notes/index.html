<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Deployment Notes - 2026-01-16 | Home Server Documentation</title><meta name=description content="Deployment notes and observations from January 2026"><meta property="og:url" content="https://docs.antoineglacet.com/docs/deployment/deployment_notes/"><meta property="og:site_name" content="Home Server Documentation"><meta property="og:title" content="Deployment Notes - 2026-01-16"><meta property="og:description" content="Deployment notes and observations from January 2026"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta itemprop=name content="Deployment Notes - 2026-01-16"><meta itemprop=description content="Deployment notes and observations from January 2026"><meta itemprop=wordCount content="896"><meta name=twitter:card content="summary"><meta name=twitter:title content="Deployment Notes - 2026-01-16"><meta name=twitter:description content="Deployment notes and observations from January 2026"><link rel=preload href=/scss/main.min.6d849f713d8c25ed95d783569522ad6e1604c48142bc1d1ab44b4a15795b3046.css as=style integrity="sha256-bYSfcT2MJe2V14NWlSKtbhYExIFCvB0atEtKFXlbMEY=" crossorigin=anonymous><link href=/scss/main.min.6d849f713d8c25ed95d783569522ad6e1604c48142bc1d1ab44b4a15795b3046.css rel=stylesheet integrity="sha256-bYSfcT2MJe2V14NWlSKtbhYExIFCvB0atEtKFXlbMEY=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script></head><body class=td-page><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="td-navbar-container container-fluid flex-column flex-md-row"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"></span><span class=navbar-brand__name>Home Server Documentation</span></a><div class="td-navbar-nav-scroll td-navbar-nav-scroll--indicator" id=main_navbar><div class="scroll-indicator scroll-left"></div><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/docs/><span>Documentation</span></a></li><li class=nav-item><a class="nav-link active" href=/docs/><span>Docs</span></a></li><li class=nav-item><a class=nav-link href=https://homepage.antoineglacet.com target=_blank rel=noopener><span>Homepage</span></a></li></ul><div class="scroll-indicator scroll-right"></div></div><div class="d-none d-lg-block td-navbar__search"></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main data-bs-spy=scroll data-bs-target=.td-toc data-bs-root-margin="0px 0px -10%"><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><script>$(function(){$("#td-section-nav a").removeClass("active"),$("#td-section-nav #m-docsdeploymentdeployment_notes").addClass("active"),$("#td-section-nav #m-docsdeploymentdeployment_notes-li span").addClass("td-sidebar-nav-active-item"),$("#td-section-nav #m-docsdeploymentdeployment_notes").parents("li").addClass("active-path"),$("#td-section-nav li.active-path").addClass("show"),$("#td-section-nav li.active-path").children("input").prop("checked",!0),$("#td-section-nav #m-docsdeploymentdeployment_notes-li").siblings("li").addClass("show"),$("#td-section-nav #m-docsdeploymentdeployment_notes-li").children("ul").children("li").addClass("show"),$("#td-sidebar-menu").toggleClass("d-none")})</script><div id=td-sidebar-menu class="td-sidebar__inner d-none"><form class="td-sidebar__search d-flex align-items-center"><button class="btn btn-link td-sidebar__toggle" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="td-sidebar-nav collapse foldable-nav" id=td-section-nav><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docs-li><a href=/docs/ title=Documentation class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Docs</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsoperations-li><input type=checkbox id=m-docsoperations-check>
<label for=m-docsoperations-check><a href=/docs/operations/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsoperations><span>Operations</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsoperationsoperating-li><input type=checkbox id=m-docsoperationsoperating-check>
<label for=m-docsoperationsoperating-check><a href=/docs/operations/operating/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsoperating><span>Operating Guide</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsoperationsquick_start-li><input type=checkbox id=m-docsoperationsquick_start-check>
<label for=m-docsoperationsquick_start-check><a href=/docs/operations/quick_start/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsquick_start><span>Quick Start: Fix SSH Lag & LAN Latency</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsoperationsperformance-tuning-li><input type=checkbox id=m-docsoperationsperformance-tuning-check>
<label for=m-docsoperationsperformance-tuning-check><a href=/docs/operations/performance-tuning/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsperformance-tuning><span>Performance Tuning Guide</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsoperationsperformance_optimization-li><input type=checkbox id=m-docsoperationsperformance_optimization-check>
<label for=m-docsoperationsperformance_optimization-check><a href=/docs/operations/performance_optimization/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsperformance_optimization><span>Performance Optimization Guide</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsinfrastructure-li><input type=checkbox id=m-docsinfrastructure-check>
<label for=m-docsinfrastructure-check><a href=/docs/infrastructure/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsinfrastructure><span>Infrastructure</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsinfrastructuretraefik-li><input type=checkbox id=m-docsinfrastructuretraefik-check>
<label for=m-docsinfrastructuretraefik-check><a href=/docs/infrastructure/traefik/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsinfrastructuretraefik><span>Traefik - Reverse Proxy & TLS</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsinfrastructureauthentik-li><input type=checkbox id=m-docsinfrastructureauthentik-check>
<label for=m-docsinfrastructureauthentik-check><a href=/docs/infrastructure/authentik/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsinfrastructureauthentik><span>Authentik - SSO & Authentication</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsmonitoring-li><input type=checkbox id=m-docsmonitoring-check>
<label for=m-docsmonitoring-check><a href=/docs/monitoring/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsmonitoring><span>Monitoring</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsmonitoringmonitoring-li><input type=checkbox id=m-docsmonitoringmonitoring-check>
<label for=m-docsmonitoringmonitoring-check><a href=/docs/monitoring/monitoring/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsmonitoringmonitoring><span>Monitoring & Observability</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsmonitoringgrafana-setup-li><input type=checkbox id=m-docsmonitoringgrafana-setup-check>
<label for=m-docsmonitoringgrafana-setup-check><a href=/docs/monitoring/grafana-setup/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsmonitoringgrafana-setup><span>Grafana Setup Guide</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docstroubleshooting-li><input type=checkbox id=m-docstroubleshooting-check>
<label for=m-docstroubleshooting-check><a href=/docs/troubleshooting/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docstroubleshooting><span>Troubleshooting</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstroubleshootingtroubleshooting-li><input type=checkbox id=m-docstroubleshootingtroubleshooting-check>
<label for=m-docstroubleshootingtroubleshooting-check><a href=/docs/troubleshooting/troubleshooting/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstroubleshootingtroubleshooting><span>Troubleshooting Guide</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsdeployment-li><input type=checkbox id=m-docsdeployment-check>
<label for=m-docsdeployment-check><a href=/docs/deployment/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsdeployment><span>Deployment</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdeploymentdeployment_checklist-li><input type=checkbox id=m-docsdeploymentdeployment_checklist-check>
<label for=m-docsdeploymentdeployment_checklist-check><a href=/docs/deployment/deployment_checklist/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdeploymentdeployment_checklist><span>Deployment Checklist - Infrastructure Improvements</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdeploymentpost-commit-steps-li><input type=checkbox id=m-docsdeploymentpost-commit-steps-check>
<label for=m-docsdeploymentpost-commit-steps-check><a href=/docs/deployment/post-commit-steps/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdeploymentpost-commit-steps><span>Post-Commit Setup Steps</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdeploymentdeployment_notes-li><input type=checkbox id=m-docsdeploymentdeployment_notes-check>
<label for=m-docsdeploymentdeployment_notes-check><a href=/docs/deployment/deployment_notes/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdeploymentdeployment_notes><span>Deployment Notes - 2026-01-16</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdeploymenthugo-site-setup-li><input type=checkbox id=m-docsdeploymenthugo-site-setup-check>
<label for=m-docsdeploymenthugo-site-setup-check><a href=/docs/deployment/hugo-site-setup/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdeploymenthugo-site-setup><span>Hugo Documentation Site - Setup Guide</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdeploymentalerting_migration-li><input type=checkbox id=m-docsdeploymentalerting_migration-check>
<label for=m-docsdeploymentalerting_migration-check><a href=/docs/deployment/alerting_migration/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdeploymentalerting_migration><span>Alerting Migration to Grafana</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdeploymentreadme-li><input type=checkbox id=m-docsdeploymentreadme-check>
<label for=m-docsdeploymentreadme-check><a href=/docs/deployment/readme/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdeploymentreadme><span></span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsplanning-li><input type=checkbox id=m-docsplanning-check>
<label for=m-docsplanning-check><a href=/docs/planning/ title="Planning & Status" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsplanning><span>Planning</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsplanningimplementation_status-li><input type=checkbox id=m-docsplanningimplementation_status-check>
<label for=m-docsplanningimplementation_status-check><a href=/docs/planning/implementation_status/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsplanningimplementation_status><span>Implementation Status - Home Server Improvements</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsplanningnext_steps-li><input type=checkbox id=m-docsplanningnext_steps-check>
<label for=m-docsplanningnext_steps-check><a href=/docs/planning/next_steps/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsplanningnext_steps><span>Next Steps - Alerting Migration Testing</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsplanningsecurity_remediation-li><input type=checkbox id=m-docsplanningsecurity_remediation-check>
<label for=m-docsplanningsecurity_remediation-check><a href=/docs/planning/security_remediation/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsplanningsecurity_remediation><span>Security Remediation: Discord Webhook Leak</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsplanningreadme-li><input type=checkbox id=m-docsplanningreadme-check>
<label for=m-docsplanningreadme-check><a href=/docs/planning/readme/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsplanningreadme><span></span></a></label></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"></div><div class=td-toc data-proofer-ignore><div class=td-toc-title><span class=td-toc-title__text>On this page</span>
<a class=td-toc-title__link title="Top of page" href=#></a></div><nav id=TableOfContents><ul><li><a href=#summary>Summary</a></li><li><a href=#what-was-fixed>What Was Fixed</a><ul><li><a href=#1-traefik-v32-incompatibility--critical-fix>1. <strong>Traefik v3.2 Incompatibility</strong> ⚠️ CRITICAL FIX</a></li><li><a href=#2-adguard--syncthing-version-conflicts>2. <strong>AdGuard & Syncthing Version Conflicts</strong></a></li><li><a href=#3-prometheus-scrape-target-failures>3. <strong>Prometheus Scrape Target Failures</strong></a></li><li><a href=#4-discord-alerts-setup--new-feature>4. <strong>Discord Alerts Setup</strong> ✅ NEW FEATURE</a></li></ul></li><li><a href=#files-changed>Files Changed</a><ul><li><a href=#configuration-files>Configuration Files</a></li><li><a href=#docker-compose>Docker Compose</a></li><li><a href=#documentation>Documentation</a></li></ul></li><li><a href=#deployment-impact>Deployment Impact</a><ul><li><a href=#downtime>Downtime</a></li><li><a href=#resource-usage>Resource Usage</a></li><li><a href=#breaking-changes>Breaking Changes</a></li></ul></li><li><a href=#verification-steps>Verification Steps</a><ul><li><a href=#1-all-services-running>1. All Services Running</a></li><li><a href=#2-web-services-accessible>2. Web Services Accessible</a></li><li><a href=#3-prometheus-targets-healthy>3. Prometheus Targets Healthy</a></li><li><a href=#4-discord-alerts-working>4. Discord Alerts Working</a></li><li><a href=#5-grafana-datasources>5. Grafana Datasources</a></li></ul></li><li><a href=#post-deployment-monitoring>Post-Deployment Monitoring</a><ul><li><a href=#first-24-hours>First 24 Hours</a></li><li><a href=#key-dashboards>Key Dashboards</a></li></ul></li><li><a href=#rollback-procedure>Rollback Procedure</a></li><li><a href=#known-issues>Known Issues</a><ul><li><a href=#1-traefik-metrics-endpoint>1. Traefik Metrics Endpoint</a></li><li><a href=#2-alertmanager-discord-logging>2. Alertmanager-Discord Logging</a></li><li><a href=#3-image-versions>3. Image Versions</a></li></ul></li><li><a href=#success-criteria>Success Criteria</a></li><li><a href=#next-steps>Next Steps</a></li><li><a href=#lessons-learned>Lessons Learned</a></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/docs/>Docs</a></li><li class=breadcrumb-item><a href=/docs/deployment/>Deployment</a></li><li class="breadcrumb-item active" aria-current=page>Deployment Notes - 2026-01-16</li></ol></nav><div class=td-content><h1>Deployment Notes - 2026-01-16</h1><div class=lead>Deployment notes and observations from January 2026</div><header class=article-meta></header><h2 id=summary>Summary</h2><p>This deployment fixes critical issues from the previous monitoring infrastructure deployment and completes the Discord alerting setup.</p><h2 id=what-was-fixed>What Was Fixed</h2><h3 id=1-traefik-v32-incompatibility--critical-fix>1. <strong>Traefik v3.2 Incompatibility</strong> ⚠️ CRITICAL FIX</h3><p><strong>Problem:</strong> All web services were inaccessible after previous deployment.</p><p><strong>Root Cause:</strong> Traefik v3.2.5 had an outdated Docker client library incompatible with Docker API v1.44+</p><pre tabindex=0><code>Error: client version 1.24 is too old. Minimum supported API version is 1.44
</code></pre><p><strong>Solution:</strong> Changed to <code>traefik:latest</code> (currently v3.6.7)</p><ul><li>✅ Compatible with Docker 29.1.4 (API 1.52)</li><li>✅ All routes rediscovered</li><li>✅ All services accessible</li></ul><p><strong>Impact:</strong> <strong>HIGH</strong> - Restored access to all web UIs (homepage, Grafana, etc.)</p><hr><h3 id=2-adguard--syncthing-version-conflicts>2. <strong>AdGuard & Syncthing Version Conflicts</strong></h3><p><strong>Problem:</strong> Both services in restart loops due to config schema incompatibility</p><p><strong>Details:</strong></p><ul><li>AdGuard: Config schema v32 too new for pinned v0.107.54</li><li>Syncthing: Config schema v51 too new for pinned v1.28</li></ul><p><strong>Solution:</strong> Changed both to <code>:latest</code> tags</p><ul><li>AdGuard: Using version compatible with schema v32</li><li>Syncthing: Using version compatible with schema v51</li></ul><p><strong>Impact:</strong> <strong>MEDIUM</strong> - Services now stable</p><hr><h3 id=3-prometheus-scrape-target-failures>3. <strong>Prometheus Scrape Target Failures</strong></h3><p><strong>Problem:</strong> 2 of 5 targets failing to scrape</p><p><strong>Issues Found:</strong></p><ul><li><code>node_exporter:9100</code> - DNS resolution failed (uses <code>host</code> network mode)</li><li><code>traefik:8082</code> - Metrics endpoint returning 404 (wrong port)</li></ul><p><strong>Solutions:</strong></p><ul><li>node_exporter: Changed to <code>172.17.0.1:9100</code> (host IP)</li><li>traefik: Changed to <code>traefik:8080</code> (API port with metrics)</li></ul><p><strong>Impact:</strong> <strong>MEDIUM</strong> - Full metrics collection restored</p><hr><h3 id=4-discord-alerts-setup--new-feature>4. <strong>Discord Alerts Setup</strong> ✅ NEW FEATURE</h3><p><strong>Problem:</strong> Discord Slack-compatible webhook incompatible with Alertmanager format</p><p><strong>Solution:</strong> Deployed <code>benjojo/alertmanager-discord</code> bridge</p><pre tabindex=0><code>Prometheus → Alertmanager → alertmanager-discord → Discord
</code></pre><p><strong>Configuration:</strong></p><ul><li>New service: <code>alertmanager-discord</code> (port 9094)</li><li>Environment variable: <code>DISCORD_WEBHOOK_URL</code> (without <code>/slack</code> suffix)</li><li>Alertmanager routes to bridge via webhook</li><li>Bridge formats alerts for Discord native API</li></ul><p><strong>Testing:</strong> ✅ Test alerts successfully delivered to Discord</p><p><strong>Impact:</strong> <strong>HIGH</strong> - Full alerting capability now operational</p><hr><h2 id=files-changed>Files Changed</h2><h3 id=configuration-files>Configuration Files</h3><ol><li><p><strong>config/alertmanager/alertmanager.yml</strong></p><ul><li>Changed receiver from <code>null</code> to <code>discord</code></li><li>Points to alertmanager-discord bridge</li><li>Simplified group_by configuration</li></ul></li><li><p><strong>config/prometheus/prometheus.yml</strong></p><ul><li>Fixed node_exporter target: <code>172.17.0.1:9100</code></li><li>Fixed traefik target: <code>traefik:8080</code></li></ul></li><li><p><strong>.env.example</strong></p><ul><li>Updated <code>DISCORD_WEBHOOK_URL</code> documentation</li><li>Removed <code>/slack</code> suffix (no longer needed)</li></ul></li></ol><h3 id=docker-compose>Docker Compose</h3><ol><li><strong>docker-compose.yml</strong><ul><li><strong>traefik</strong>: <code>v3.2</code> → <code>latest</code> (v3.6.7)</li><li><strong>adguard</strong>: <code>v0.107.54</code> → <code>latest</code></li><li><strong>syncthing</strong>: <code>1.28</code> → <code>latest</code></li><li><strong>alertmanager</strong>: Added <code>user: "1000:1000"</code>, removed unused env var</li><li><strong>alertmanager-discord</strong>: NEW service added</li></ul></li></ol><h3 id=documentation>Documentation</h3><ol><li><p><strong>docs/post-commit-steps.md</strong></p><ul><li>Updated Discord alerts section</li><li>Marked as completed with new architecture</li></ul></li><li><p><strong>DEPLOYMENT_NOTES.md</strong></p><ul><li>NEW file documenting this deployment</li></ul></li></ol><hr><h2 id=deployment-impact>Deployment Impact</h2><h3 id=downtime>Downtime</h3><ul><li><strong>Traefik restart:</strong> ~5 seconds (all web services briefly unavailable)</li><li><strong>AdGuard restart:</strong> ~3 seconds (DNS queries may have failed)</li><li><strong>Syncthing restart:</strong> ~3 seconds (file sync paused)</li><li><strong>New service start:</strong> No downtime</li></ul><h3 id=resource-usage>Resource Usage</h3><ul><li><strong>New container:</strong> alertmanager-discord (~10MB RAM, minimal CPU)</li><li><strong>Traefik:</strong> Upgraded image (~50MB larger)</li><li><strong>Total additional memory:</strong> ~15MB</li></ul><h3 id=breaking-changes>Breaking Changes</h3><ul><li>✅ None - all changes backward compatible</li></ul><hr><h2 id=verification-steps>Verification Steps</h2><h3 id=1-all-services-running>1. All Services Running</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker compose ps
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Expected: 38/38 containers running (37 + new alertmanager-discord)</span>
</span></span></code></pre></div><h3 id=2-web-services-accessible>2. Web Services Accessible</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -I https://homepage.antoineglacet.com
</span></span><span style=display:flex><span>curl -I https://grafana.antoineglacet.com
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Expected: HTTP 302 (redirect to Authentik) or HTTP 200</span>
</span></span></code></pre></div><h3 id=3-prometheus-targets-healthy>3. Prometheus Targets Healthy</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -s http://localhost:9090/api/v1/targets <span style=color:#000;font-weight:700>|</span> grep -c <span style=color:#4e9a06>&#39;&#34;health&#34;:&#34;up&#34;&#39;</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Expected: 5 (prometheus, node_exporter, cadvisor, traefik, loki)</span>
</span></span></code></pre></div><h3 id=4-discord-alerts-working>4. Discord Alerts Working</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Send test alert</span>
</span></span><span style=display:flex><span>cat <span style=color:#4e9a06>&lt;&lt; &#39;EOF&#39; | curl -X POST -H &#34;Content-Type: application/json&#34; -d @- http://localhost:9093/api/v2/alerts
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>[{&#34;labels&#34;:{&#34;alertname&#34;:&#34;Test&#34;,&#34;severity&#34;:&#34;info&#34;},&#34;annotations&#34;:{&#34;summary&#34;:&#34;Test&#34;}}]
</span></span></span><span style=display:flex><span><span style=color:#4e9a06>EOF</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Check bridge received it</span>
</span></span><span style=display:flex><span>docker compose logs alertmanager-discord --tail<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>5</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Expected: &#34;alertmanager-discord:9094 - [POST]&#34;</span>
</span></span></code></pre></div><h3 id=5-grafana-datasources>5. Grafana Datasources</h3><p>Visit: http://localhost:3000 → Configuration → Data Sources</p><ul><li>✅ Prometheus (green)</li><li>✅ Loki (green)</li></ul><hr><h2 id=post-deployment-monitoring>Post-Deployment Monitoring</h2><h3 id=first-24-hours>First 24 Hours</h3><p>Monitor these metrics:</p><ul><li>Swap usage trending down (target: &lt;500MB)</li><li>Container memory within limits</li><li>No OOM kills</li><li>Discord alerts delivering</li><li>All Prometheus targets UP</li></ul><h3 id=key-dashboards>Key Dashboards</h3><ul><li>Node Exporter Full (ID: 1860) - System metrics</li><li>Docker Container Metrics (ID: 179) - Resource usage</li><li>Traefik (ID: 12250) - HTTP traffic</li><li>Loki Logs (ID: 12611) - Container logs</li></ul><hr><h2 id=rollback-procedure>Rollback Procedure</h2><p>If issues arise:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Option 1: Revert this commit only</span>
</span></span><span style=display:flex><span>git revert HEAD
</span></span><span style=display:flex><span>docker compose pull
</span></span><span style=display:flex><span>docker compose up -d
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Option 2: Revert to before monitoring changes</span>
</span></span><span style=display:flex><span>git reset --hard &lt;previous-commit-hash&gt;
</span></span><span style=display:flex><span>docker compose pull  
</span></span><span style=display:flex><span>docker compose up -d
</span></span></code></pre></div><p><strong>Note:</strong> Reverting will:</p><ul><li>Restore Traefik v3.2 (breaks web access - not recommended)</li><li>Restore AdGuard/Syncthing pinned versions (breaks those services)</li><li>Remove Discord alerting</li><li>Break Prometheus monitoring</li></ul><p><strong>Recommendation:</strong> Fix forward, not rollback</p><hr><h2 id=known-issues>Known Issues</h2><h3 id=1-traefik-metrics-endpoint>1. Traefik Metrics Endpoint</h3><ul><li>Configured for port 8082 but metrics only available on 8080 (API port)</li><li>Works but not ideal for security</li><li>TODO: Fix metrics entrypoint configuration</li></ul><h3 id=2-alertmanager-discord-logging>2. Alertmanager-Discord Logging</h3><ul><li>Bridge logs minimal info (only &ldquo;[POST]&rdquo; messages)</li><li>Success/failure not explicitly logged</li><li>Verified working via Discord channel</li></ul><h3 id=3-image-versions>3. Image Versions</h3><ul><li>Traefik, AdGuard, Syncthing now on <code>:latest</code></li><li>May auto-upgrade on <code>docker compose pull</code></li><li>Consider pinning to specific versions after stability confirmed</li></ul><hr><h2 id=success-criteria>Success Criteria</h2><p>After 24 hours, verify:</p><ul><li>✅ All 38 containers running healthy</li><li>✅ Swap usage &lt;500MB (down from 1.9GB)</li><li>✅ All web services accessible</li><li>✅ All Prometheus targets UP</li><li>✅ Discord receiving real alerts (if any)</li><li>✅ Grafana showing data</li><li>✅ No OOM kills</li><li>✅ SSH sessions responsive</li></ul><hr><h2 id=next-steps>Next Steps</h2><ol><li><strong>Monitor for 24 hours</strong> - Watch for any regressions</li><li><strong>Import Grafana dashboards</strong> - IDs: 1860, 179, 12250, 12611</li><li><strong>Tune alert thresholds</strong> - Based on observed metrics</li><li><strong>Consider version pinning</strong> - Pin Traefik/AdGuard/Syncthing after testing</li><li><strong>Fix Traefik metrics port</strong> - Dedicated metrics endpoint on 8082</li></ol><hr><h2 id=lessons-learned>Lessons Learned</h2><ol><li><strong>Version pinning risks:</strong> Always test pinned versions for compatibility</li><li><strong>Docker API changes:</strong> Traefik containers must support current Docker API</li><li><strong>Config schema versions:</strong> Check compatibility when downgrading image versions</li><li><strong>Discord webhooks:</strong> Slack-compatible mode doesn&rsquo;t work with all tools</li><li><strong>Network modes:</strong> <code>host</code> network requires special Prometheus configuration</li></ol><hr><p><strong>Deployment Date:</strong> 2026-01-16
<strong>Services Affected:</strong> Traefik, AdGuard, Syncthing, Alertmanager, Prometheus
<strong>New Services:</strong> alertmanager-discord
<strong>Downtime:</strong> &lt;1 minute
<strong>Status:</strong> ✅ <strong>SUCCESSFUL</strong></p></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=Homepage aria-label=Homepage><a target=_blank rel=noopener href=https://homepage.antoineglacet.com aria-label=Homepage><i class="fa fa-home"></i></a></li></ul></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"><span class=td-footer__copyright>&copy;
2026
<span class=td-footer__authors>Antoine Glacet</span></span><span class=td-footer__all_rights_reserved>All Rights Reserved</span></div></div></div></footer></div><script src=/js/main.min.258190f24d50bde9095e369c0cd7315407f95e1da5f39472b3850b40279a9e08.js integrity="sha256-JYGQ8k1QvekJXjacDNcxVAf5Xh2l85Rys4ULQCeangg=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>