# ----------------------------
# COMMON ENVIRONMENT
# ----------------------------
TZ=Asia/Tokyo
PUID=1000
PGID=1000

# ----------------------------
# NETWORKING
# ----------------------------
# Allow all 10.13.x.x addresses to be treated as local
LOCAL_NETWORK=10.13.0.0/16

# ----------------------------
# REVERSE PROXY / CERTIFICATES
# ----------------------------
TRAEFIK_DOMAIN=antoineglacet.com
TRAEFIK_ACME_EMAIL=admin@example.com
TRAEFIK_CLOUDFLARE_TOKEN=change_me_cloudflare_token
CERT=/home/antoine/home-server/config/swag/etc/letsencrypt/archive/antoineglacet.com

# ----------------------------
# DATABASES
# ----------------------------

# PostgreSQL Settings
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# pgAdmin Settings
PGADMIN_DEFAULT_EMAIL=admin@example.com
PGADMIN_DEFAULT_PASSWORD=change_me_pgadmin_password

# ----------------------------
# HOME AUTOMATION
# ----------------------------
# Use homeassistant:stable when running not on Raspberry Pi
# HOME_ASSISTANT_IMAGE_CONF=/home/ubuntu/home-server/HA/config/homeassistant

# MQTT broker for Zigbee2MQTT
MQTT_SERVER=mqtt://mqtt:1883
MQTT_USER=change_me_mqtt_user
MQTT_PASSWORD=change_me_mqtt_password
ZIGBEE_ADAPTOR_PATH=/dev/serial/by-id/usb-EXAMPLE_ZIGBEE_ADAPTER

# ----------------------------
# AUTHENTICATION & SECRETS
# ----------------------------
AUTHELIA_JWT_SECRET=change_me_authelia_jwt_secret
AUTHELIA_SESSION_SECRET=change_me_authelia_session_secret
AUTHELIA_STORAGE_ENCRYPTION_KEY=change_me_authelia_storage_key
AUTHELIA_SMTP_PASSWORD=change_me_authelia_smtp_password

# Authentik
AUTHENTIK_SECRET_KEY=change_me_authentik_secret

AUTHENTIK_POSTGRESQL_NAME=authentik
AUTHENTIK_POSTGRESQL__HOST=postgres
AUTHENTIK_POSTGRESQL__PORT=5432
AUTHENTIK_POSTGRESQL__USER=authentik
AUTHENTIK_POSTGRESQL__PASSWORD=change_me_authentik_db_password
AUTHENTIK_POSTGRESQL__NAME=authentik

AUTHENTIK_REDIS__HOST=authentik-redis
AUTHENTIK_REDIS__PORT=6379
AUTHENTIK_REDIS__PASSWORD=change_me_authentik_redis_password

# ----------------------------
# DYNAMIC DNS
# ----------------------------
DDCLIENT_CLOUDFLARE_TOKEN=change_me_cloudflare_token

# ----------------------------
# DIRECTORIES
# ----------------------------
DATA=/media/data
BACKUP=/media/data/backup
DOWNLOADS=/media/data/downloads
WATCH=/media/data/downloads/watch
MEDIA=/media/data/media
MOVIES=/media/data/media/movies
TV=/media/data/media/tv
LIBRARY=/media/data/media/calibre-library
BOOK_INGEST=/media/data/media/book_ingest
SAVES=/media/data/gamesaves
HOMESERVER=/home/antoine/home-server

# ----------------------------
# VPN (NORDVPN)
# ----------------------------
# Found with command:
# sudo docker run --rm --cap-add=NET_ADMIN -e USER=email \
#   -e PASS=password -e legacy bubuntux/nordvpn:get_private_key
NORDVPN_PRIVATE_KEY=change_me_nordvpn_private_key

# ----------------------------
# SAMBA
# ----------------------------
SAMBA_USER=example-user
SAMBA_PASSWORD=change_me_samba_password

# ----------------------------
# APPFLOWY CLOUD
# ----------------------------

APPFLOWY_ADMIN_USER=admin@example.com
APPFLOWY_ADMIN_PASS=change_me_admin_password

FQDN=appflowy.example.com

SCHEME=https
WS_SCHEME=wss

APPFLOWY_BASE_URL=${SCHEME}://${FQDN}
APPFLOWY_WEBSOCKET_BASE_URL=${WS_SCHEME}://${FQDN}/ws/v2

# PostgreSQL for Appflowy should be changed!!
# today we initialized that, but we need to change the logic
# it should be multi-DB for multi-services
POSTGRES_SUPERUSER=postgres
POSTGRES_PASSWORD_SUPERUSER=change_me_appflowy_db_password
POSTGRES_DB_SUPERUSER=postgres

# Redis Settings
REDIS_HOST=redis
REDIS_PORT=6379

MINIO_HOST=minio
MINIO_PORT=9000

AWS_ACCESS_KEY=change_me_minio_access_key
AWS_SECRET=change_me_minio_secret_key

APPFLOWY_GOTRUE_BASE_URL=http://gotrue:9999
APPFLOWY_DATABASE_URL=postgres://${POSTGRES_SUPERUSER}:${POSTGRES_PASSWORD_SUPERUSER}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB_SUPERUSER}
APPFLOWY_ACCESS_CONTROL=true
APPFLOWY_WEBSOCKET_MAILBOX_SIZE=6000
APPFLOWY_DATABASE_MAX_CONNECTIONS=40
APPFLOWY_REDIS_URI=redis://${REDIS_HOST}:${REDIS_PORT}
GOTRUE_DATABASE_URL=postgres://${POSTGRES_SUPERUSER}:${POSTGRES_PASSWORD_SUPERUSER}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB_SUPERUSER}?search_path=auth

GOTRUE_ADMIN_EMAIL=${APPFLOWY_ADMIN_USER}
GOTRUE_ADMIN_PASSWORD=${APPFLOWY_ADMIN_PASS}

# JWT Configuration
# Authentication key, change this and keep the key safe and secret
GOTRUE_JWT_SECRET=change_me_gotrue_jwt_secret
GOTRUE_JWT_EXP=7200
API_EXTERNAL_URL=${APPFLOWY_BASE_URL}/gotrue
GOTRUE_MAILER_AUTOCONFIRM=true
GOTRUE_DISABLE_SIGNUP=false
GOTRUE_RATE_LIMIT_EMAIL_SENT=100
GOTRUE_MAILER_TEMPLATES_MAGIC_LINK=
ADMIN_FRONTEND_REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}
ADMIN_FRONTEND_GOTRUE_URL=http://gotrue:9999
ADMIN_FRONTEND_APPFLOWY_CLOUD_URL=http://appflowy_cloud:8000
ADMIN_FRONTEND_PATH_PREFIX=/console

# üìß EMAIL CONFIGURATION: SMTP settings (optional but recommended for production)
GOTRUE_SMTP_HOST=smtp.gmail.com
GOTRUE_SMTP_PORT=465
GOTRUE_SMTP_USER=notifications@example.com
GOTRUE_SMTP_PASS=change_me_gotrue_smtp_password
GOTRUE_SMTP_ADMIN_EMAIL=admin@example.com

# AppFlowy Cloud Mailer
APPFLOWY_MAILER_SMTP_HOST=smtp.gmail.com
APPFLOWY_MAILER_SMTP_PORT=465
APPFLOWY_MAILER_SMTP_USERNAME=notifications@example.com
APPFLOWY_MAILER_SMTP_EMAIL=notifications@example.com
APPFLOWY_MAILER_SMTP_PASSWORD=change_me_mailer_password
APPFLOWY_MAILER_SMTP_TLS_KIND=wrapper # "none" "wrapper" "required" "opportunistic"

# üîë OAUTH PROVIDERS: Third-party authentication (optional)
GOTRUE_EXTERNAL_GOOGLE_ENABLED=false
GOTRUE_EXTERNAL_GITHUB_ENABLED=false
GOTRUE_EXTERNAL_DISCORD_ENABLED=false
GOTRUE_EXTERNAL_APPLE_ENABLED=false

# SAML 2.0. Refer to https://github.com/AppFlowy-IO/AppFlowy-Cloud/blob/main/doc/OKTA_SAML.md for example using Okta.
GOTRUE_SAML_ENABLED=false
GOTRUE_SAML_PRIVATE_KEY=

APPFLOWY_S3_USE_MINIO=true
APPFLOWY_S3_CREATE_BUCKET=true
APPFLOWY_S3_MINIO_URL=http://${MINIO_HOST}:${MINIO_PORT}
APPFLOWY_S3_ACCESS_KEY=${AWS_ACCESS_KEY}
APPFLOWY_S3_SECRET_KEY=${AWS_SECRET}
APPFLOWY_S3_BUCKET=appflowy

# ‚öôÔ∏è WORKER SERVICES: Background processing (good defaults for production)
APPFLOWY_INDEXER_ENABLED=true
APPFLOWY_INDEXER_DATABASE_URL=postgres://${POSTGRES_SUPERUSER}:${POSTGRES_PASSWORD_SUPERUSER}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB_SUPERUSER}
APPFLOWY_INDEXER_REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}
APPFLOWY_INDEXER_EMBEDDING_BUFFER_SIZE=5000
APPFLOWY_COLLABORATE_MULTI_THREAD=false
APPFLOWY_COLLABORATE_REMOVE_BATCH_SIZE=100
APPFLOWY_WORKER_REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}
APPFLOWY_WORKER_DATABASE_URL=postgres://${POSTGRES_SUPERUSER}:${POSTGRES_PASSWORD_SUPERUSER}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB_SUPERUSER}
APPFLOWY_WORKER_DATABASE_NAME=${POSTGRES_DB_SUPERUSER}

# üåê WEB FRONTEND: AppFlowy Web interface
APPFLOWY_WEB_URL=${APPFLOWY_BASE_URL}

PGADMIN_DEFAULT_EMAIL=${APPFLOWY_ADMIN_USER}
PGADMIN_DEFAULT_PASSWORD=${APPFLOWY_ADMIN_PASS}

RUST_LOG=info

# ----------------------------
# ALERTING
# ----------------------------
# Discord webhook for Alertmanager notifications
# Format: https://discord.com/api/webhooks/WEBHOOK_ID/TOKEN/slack
# Discord webhook URL for Prometheus alerts (via alertmanager-discord bridge)
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/YOUR_WEBHOOK_ID/YOUR_TOKEN
