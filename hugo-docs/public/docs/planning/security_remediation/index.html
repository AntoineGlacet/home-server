<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Security Remediation: Discord Webhook Leak | Home Server Documentation</title><meta name=description content="Security remediation tasks for Discord webhook leak incident"><meta property="og:url" content="https://docs.antoineglacet.com/docs/planning/security_remediation/"><meta property="og:site_name" content="Home Server Documentation"><meta property="og:title" content="Security Remediation: Discord Webhook Leak"><meta property="og:description" content="Security remediation tasks for Discord webhook leak incident"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta itemprop=name content="Security Remediation: Discord Webhook Leak"><meta itemprop=description content="Security remediation tasks for Discord webhook leak incident"><meta itemprop=wordCount content="531"><meta name=twitter:card content="summary"><meta name=twitter:title content="Security Remediation: Discord Webhook Leak"><meta name=twitter:description content="Security remediation tasks for Discord webhook leak incident"><link rel=preload href=/scss/main.min.6d849f713d8c25ed95d783569522ad6e1604c48142bc1d1ab44b4a15795b3046.css as=style integrity="sha256-bYSfcT2MJe2V14NWlSKtbhYExIFCvB0atEtKFXlbMEY=" crossorigin=anonymous><link href=/scss/main.min.6d849f713d8c25ed95d783569522ad6e1604c48142bc1d1ab44b4a15795b3046.css rel=stylesheet integrity="sha256-bYSfcT2MJe2V14NWlSKtbhYExIFCvB0atEtKFXlbMEY=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script></head><body class=td-page><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="td-navbar-container container-fluid flex-column flex-md-row"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"></span><span class=navbar-brand__name>Home Server Documentation</span></a><div class="td-navbar-nav-scroll td-navbar-nav-scroll--indicator" id=main_navbar><div class="scroll-indicator scroll-left"></div><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/docs/><span>Documentation</span></a></li><li class=nav-item><a class="nav-link active" href=/docs/><span>Docs</span></a></li><li class=nav-item><a class=nav-link href=https://homepage.antoineglacet.com target=_blank rel=noopener><span>Homepage</span></a></li></ul><div class="scroll-indicator scroll-right"></div></div><div class="d-none d-lg-block td-navbar__search"></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main data-bs-spy=scroll data-bs-target=.td-toc data-bs-root-margin="0px 0px -10%"><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><script>$(function(){$("#td-section-nav a").removeClass("active"),$("#td-section-nav #m-docsplanningsecurity_remediation").addClass("active"),$("#td-section-nav #m-docsplanningsecurity_remediation-li span").addClass("td-sidebar-nav-active-item"),$("#td-section-nav #m-docsplanningsecurity_remediation").parents("li").addClass("active-path"),$("#td-section-nav li.active-path").addClass("show"),$("#td-section-nav li.active-path").children("input").prop("checked",!0),$("#td-section-nav #m-docsplanningsecurity_remediation-li").siblings("li").addClass("show"),$("#td-section-nav #m-docsplanningsecurity_remediation-li").children("ul").children("li").addClass("show"),$("#td-sidebar-menu").toggleClass("d-none")})</script><div id=td-sidebar-menu class="td-sidebar__inner d-none"><form class="td-sidebar__search d-flex align-items-center"><button class="btn btn-link td-sidebar__toggle" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="td-sidebar-nav collapse foldable-nav" id=td-section-nav><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docs-li><a href=/docs/ title=Documentation class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Docs</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsoperations-li><input type=checkbox id=m-docsoperations-check>
<label for=m-docsoperations-check><a href=/docs/operations/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsoperations><span>Operations</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsoperationsoperating-li><input type=checkbox id=m-docsoperationsoperating-check>
<label for=m-docsoperationsoperating-check><a href=/docs/operations/operating/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsoperating><span>Operating Guide</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsoperationsquick_start-li><input type=checkbox id=m-docsoperationsquick_start-check>
<label for=m-docsoperationsquick_start-check><a href=/docs/operations/quick_start/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsquick_start><span>Quick Start: Fix SSH Lag & LAN Latency</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsoperationsperformance-tuning-li><input type=checkbox id=m-docsoperationsperformance-tuning-check>
<label for=m-docsoperationsperformance-tuning-check><a href=/docs/operations/performance-tuning/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsperformance-tuning><span>Performance Tuning Guide</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsoperationsperformance_optimization-li><input type=checkbox id=m-docsoperationsperformance_optimization-check>
<label for=m-docsoperationsperformance_optimization-check><a href=/docs/operations/performance_optimization/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsperformance_optimization><span>Performance Optimization Guide</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsinfrastructure-li><input type=checkbox id=m-docsinfrastructure-check>
<label for=m-docsinfrastructure-check><a href=/docs/infrastructure/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsinfrastructure><span>Infrastructure</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsinfrastructuretraefik-li><input type=checkbox id=m-docsinfrastructuretraefik-check>
<label for=m-docsinfrastructuretraefik-check><a href=/docs/infrastructure/traefik/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsinfrastructuretraefik><span>Traefik - Reverse Proxy & TLS</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsinfrastructureauthentik-li><input type=checkbox id=m-docsinfrastructureauthentik-check>
<label for=m-docsinfrastructureauthentik-check><a href=/docs/infrastructure/authentik/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsinfrastructureauthentik><span>Authentik - SSO & Authentication</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsmonitoring-li><input type=checkbox id=m-docsmonitoring-check>
<label for=m-docsmonitoring-check><a href=/docs/monitoring/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsmonitoring><span>Monitoring</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsmonitoringmonitoring-li><input type=checkbox id=m-docsmonitoringmonitoring-check>
<label for=m-docsmonitoringmonitoring-check><a href=/docs/monitoring/monitoring/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsmonitoringmonitoring><span>Monitoring & Observability</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsmonitoringgrafana-setup-li><input type=checkbox id=m-docsmonitoringgrafana-setup-check>
<label for=m-docsmonitoringgrafana-setup-check><a href=/docs/monitoring/grafana-setup/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsmonitoringgrafana-setup><span>Grafana Setup Guide</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docstroubleshooting-li><input type=checkbox id=m-docstroubleshooting-check>
<label for=m-docstroubleshooting-check><a href=/docs/troubleshooting/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docstroubleshooting><span>Troubleshooting</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstroubleshootingtroubleshooting-li><input type=checkbox id=m-docstroubleshootingtroubleshooting-check>
<label for=m-docstroubleshootingtroubleshooting-check><a href=/docs/troubleshooting/troubleshooting/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstroubleshootingtroubleshooting><span>Troubleshooting Guide</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsdeployment-li><input type=checkbox id=m-docsdeployment-check>
<label for=m-docsdeployment-check><a href=/docs/deployment/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsdeployment><span>Deployment</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdeploymentdeployment_checklist-li><input type=checkbox id=m-docsdeploymentdeployment_checklist-check>
<label for=m-docsdeploymentdeployment_checklist-check><a href=/docs/deployment/deployment_checklist/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdeploymentdeployment_checklist><span>Deployment Checklist - Infrastructure Improvements</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdeploymentpost-commit-steps-li><input type=checkbox id=m-docsdeploymentpost-commit-steps-check>
<label for=m-docsdeploymentpost-commit-steps-check><a href=/docs/deployment/post-commit-steps/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdeploymentpost-commit-steps><span>Post-Commit Setup Steps</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdeploymentdeployment_notes-li><input type=checkbox id=m-docsdeploymentdeployment_notes-check>
<label for=m-docsdeploymentdeployment_notes-check><a href=/docs/deployment/deployment_notes/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdeploymentdeployment_notes><span>Deployment Notes - 2026-01-16</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdeploymenthugo-site-setup-li><input type=checkbox id=m-docsdeploymenthugo-site-setup-check>
<label for=m-docsdeploymenthugo-site-setup-check><a href=/docs/deployment/hugo-site-setup/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdeploymenthugo-site-setup><span>Hugo Documentation Site - Setup Guide</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdeploymentalerting_migration-li><input type=checkbox id=m-docsdeploymentalerting_migration-check>
<label for=m-docsdeploymentalerting_migration-check><a href=/docs/deployment/alerting_migration/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdeploymentalerting_migration><span>Alerting Migration to Grafana</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdeploymentreadme-li><input type=checkbox id=m-docsdeploymentreadme-check>
<label for=m-docsdeploymentreadme-check><a href=/docs/deployment/readme/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdeploymentreadme><span></span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsplanning-li><input type=checkbox id=m-docsplanning-check>
<label for=m-docsplanning-check><a href=/docs/planning/ title="Planning & Status" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsplanning><span>Planning</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsplanningimplementation_status-li><input type=checkbox id=m-docsplanningimplementation_status-check>
<label for=m-docsplanningimplementation_status-check><a href=/docs/planning/implementation_status/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsplanningimplementation_status><span>Implementation Status - Home Server Improvements</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsplanningnext_steps-li><input type=checkbox id=m-docsplanningnext_steps-check>
<label for=m-docsplanningnext_steps-check><a href=/docs/planning/next_steps/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsplanningnext_steps><span>Next Steps - Alerting Migration Testing</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsplanningsecurity_remediation-li><input type=checkbox id=m-docsplanningsecurity_remediation-check>
<label for=m-docsplanningsecurity_remediation-check><a href=/docs/planning/security_remediation/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsplanningsecurity_remediation><span>Security Remediation: Discord Webhook Leak</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsplanningreadme-li><input type=checkbox id=m-docsplanningreadme-check>
<label for=m-docsplanningreadme-check><a href=/docs/planning/readme/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsplanningreadme><span></span></a></label></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"></div><div class=td-toc data-proofer-ignore><div class=td-toc-title><span class=td-toc-title__text>On this page</span>
<a class=td-toc-title__link title="Top of page" href=#></a></div><nav id=TableOfContents><ul><li><a href=#what-was-done>What Was Done</a><ul><li><a href=#1-files-cleaned>1. Files Cleaned</a></li><li><a href=#2-git-history-rewritten>2. Git History Rewritten</a></li><li><a href=#3-security-measures-added>3. Security Measures Added</a></li><li><a href=#4-backup-created>4. Backup Created</a></li></ul></li><li><a href=#next-steps-required>Next Steps Required</a><ul><li><a href=#critical-revoke-the-exposed-webhook>CRITICAL: Revoke the Exposed Webhook</a></li><li><a href=#update-local-env-file>Update Local .env File</a></li><li><a href=#restart-grafana>Restart Grafana</a></li><li><a href=#test-the-new-webhook>Test the New Webhook</a></li></ul></li><li><a href=#what-was-protected>What Was Protected</a><ul><li><a href=#files-that-were-hardcoded-now-fixed>Files That Were Hardcoded (Now Fixed)</a></li><li><a href=#files-that-were-already-correct>Files That Were Already Correct</a></li><li><a href=#git-history>Git History</a></li></ul></li><li><a href=#prevention-measures>Prevention Measures</a><ul><li><a href=#pre-commit-hook>Pre-commit Hook</a></li><li><a href=#gitignore>.gitignore</a></li><li><a href=#best-practices-going-forward>Best Practices Going Forward</a></li></ul></li><li><a href=#technical-details>Technical Details</a><ul><li><a href=#tools-used>Tools Used</a></li><li><a href=#commands-executed>Commands Executed</a></li></ul></li><li><a href=#verification>Verification</a></li><li><a href=#recovery-information>Recovery Information</a></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/docs/>Docs</a></li><li class=breadcrumb-item><a href=/docs/planning/>Planning</a></li><li class="breadcrumb-item active" aria-current=page>Security Remediation: Discord Webhook Leak</li></ol></nav><div class=td-content><h1>Security Remediation: Discord Webhook Leak</h1><div class=lead>Security remediation tasks for Discord webhook leak incident</div><header class=article-meta></header><p><strong>Date</strong>: 2026-01-19
<strong>Issue</strong>: Discord webhook URL was committed to public GitHub repository
<strong>Status</strong>: ✅ RESOLVED</p><hr><h2 id=what-was-done>What Was Done</h2><h3 id=1-files-cleaned>1. Files Cleaned</h3><ul><li><strong>NEXT_STEPS.md</strong>: Replaced hardcoded webhook URL with <code>${DISCORD_WEBHOOK_URL}</code> variable reference</li><li><strong>.env</strong>: Replaced actual webhook URL with placeholder <code>YOUR_DISCORD_WEBHOOK_URL_HERE</code></li></ul><h3 id=2-git-history-rewritten>2. Git History Rewritten</h3><p>Used <code>git-filter-repo</code> to rewrite entire git history and remove all occurrences of the exposed webhook URL:</p><ul><li>Processed 118 commits</li><li>Replaced webhook ID/token: <code>1461590139049607252/zRIDDC0h...</code> with placeholder</li><li>Force pushed cleaned history to all branches on GitHub</li></ul><h3 id=3-security-measures-added>3. Security Measures Added</h3><p>Created <code>.git/hooks/pre-commit</code> hook that:</p><ul><li>Blocks commits containing <code>.env</code> file</li><li>Detects Discord webhook URLs in staged files</li><li>Warns about hardcoded DISCORD_WEBHOOK_URL values</li><li>Can be bypassed with <code>--no-verify</code> flag (not recommended)</li></ul><h3 id=4-backup-created>4. Backup Created</h3><p>Full repository backup saved at: <code>/home/antoine/home-server-backup-20260119-163223</code></p><hr><h2 id=next-steps-required>Next Steps Required</h2><h3 id=critical-revoke-the-exposed-webhook>CRITICAL: Revoke the Exposed Webhook</h3><ol><li>Go to Discord server settings</li><li>Navigate to Integrations → Webhooks</li><li>Find the webhook with ID <code>1461590139049607252</code></li><li>Delete or regenerate the webhook URL</li><li>Update <code>.env</code> file with new webhook URL</li></ol><h3 id=update-local-env-file>Update Local .env File</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#204a87>cd</span> ~/home-server
</span></span><span style=display:flex><span>nano .env
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Update DISCORD_WEBHOOK_URL with your new webhook URL</span>
</span></span></code></pre></div><h3 id=restart-grafana>Restart Grafana</h3><p>After updating .env:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker-compose down grafana
</span></span><span style=display:flex><span>docker-compose up -d grafana
</span></span></code></pre></div><h3 id=test-the-new-webhook>Test the New Webhook</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Test directly</span>
</span></span><span style=display:flex><span>curl -X POST <span style=color:#4e9a06>&#34;</span><span style=color:#4e9a06>${</span><span style=color:#000>DISCORD_WEBHOOK_URL</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>&#34;</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  -H <span style=color:#4e9a06>&#34;Content-Type: application/json&#34;</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  -d <span style=color:#4e9a06>&#39;{&#34;content&#34;: &#34;Test from command line&#34;}&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Test in Grafana UI</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Go to Alerting → Contact points → Test</span>
</span></span></code></pre></div><hr><h2 id=what-was-protected>What Was Protected</h2><h3 id=files-that-were-hardcoded-now-fixed>Files That Were Hardcoded (Now Fixed)</h3><ul><li><code>NEXT_STEPS.md:70</code> - Troubleshooting curl command</li><li><code>.env:127</code> - Environment variable value</li></ul><h3 id=files-that-were-already-correct>Files That Were Already Correct</h3><ul><li><code>config/grafana/provisioning/alerting/contactpoints.yml</code> - Uses <code>${DISCORD_WEBHOOK_URL}</code> variable</li><li><code>.env.example</code> - Contains placeholder values</li><li><code>DEPLOYMENT_CHECKLIST.md</code> - Contains placeholder values</li></ul><h3 id=git-history>Git History</h3><p>All 118 commits were rewritten to remove the webhook URL. The following commits originally contained the webhook:</p><ul><li><code>74bfb55</code> → <code>54c17e3</code>: &ldquo;Migrate alerting from Prometheus Alertmanager to Grafana unified alerting&rdquo;</li><li>Multiple other commits were also cleaned</li></ul><hr><h2 id=prevention-measures>Prevention Measures</h2><h3 id=pre-commit-hook>Pre-commit Hook</h3><p>Located at: <code>.git/hooks/pre-commit</code></p><ul><li>Automatically checks all staged files for secrets before commit</li><li>Prevents accidental commits of sensitive data</li><li>Must be explicitly bypassed to commit secrets</li></ul><h3 id=gitignore>.gitignore</h3><p>The <code>.env</code> file is already in <code>.gitignore</code>, but the pre-commit hook provides an extra layer of protection.</p><h3 id=best-practices-going-forward>Best Practices Going Forward</h3><ol><li><strong>Never hardcode secrets</strong> - Always use environment variables or secret management</li><li><strong>Use ${VARIABLE} references</strong> in configuration files</li><li><strong>Test the pre-commit hook</strong> - Try to commit a file with a webhook URL to verify it blocks</li><li><strong>Regular audits</strong> - Periodically check for accidentally committed secrets</li></ol><hr><h2 id=technical-details>Technical Details</h2><h3 id=tools-used>Tools Used</h3><ul><li><code>git-filter-repo</code> v2.47.0 - For history rewriting</li><li>Custom pre-commit hook - For future prevention</li></ul><h3 id=commands-executed>Commands Executed</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Install git-filter-repo</span>
</span></span><span style=display:flex><span>pip3 install git-filter-repo
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Create backup</span>
</span></span><span style=display:flex><span>cp -r home-server home-server-backup-20260119-163223
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Rewrite history</span>
</span></span><span style=display:flex><span>git-filter-repo --replace-text webhook-replacements.txt --force
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Force push to all branches</span>
</span></span><span style=display:flex><span>git remote add origin https://github.com/AntoineGlacet/home-server.git
</span></span><span style=display:flex><span>git push --force --all origin
</span></span><span style=display:flex><span>git push --force --tags origin
</span></span></code></pre></div><hr><h2 id=verification>Verification</h2><p>To verify the webhook has been removed from history:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Should return no results</span>
</span></span><span style=display:flex><span>git log --all --full-history -p -S <span style=color:#4e9a06>&#34;1461590139049607252&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Should return no results</span>
</span></span><span style=display:flex><span>grep -r <span style=color:#4e9a06>&#34;1461590139049607252&#34;</span> . --exclude-dir<span style=color:#ce5c00;font-weight:700>=</span>.git
</span></span></code></pre></div><hr><h2 id=recovery-information>Recovery Information</h2><p>If you need to recover the original repository:</p><ul><li>Backup location: <code>/home/antoine/home-server-backup-20260119-163223</code></li><li>Original remote: <code>https://github.com/AntoineGlacet/home-server.git</code></li></ul><p>⚠️ <strong>Important</strong>: The backup still contains the exposed webhook URL. Do not push it to any public repository.</p><hr><p><strong>Completed</strong>: 2026-01-19 16:33 JST
<strong>Verified</strong>: Git history cleaned, pre-commit hook active, changes pushed to GitHub</p></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=Homepage aria-label=Homepage><a target=_blank rel=noopener href=https://homepage.antoineglacet.com aria-label=Homepage><i class="fa fa-home"></i></a></li></ul></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"><span class=td-footer__copyright>&copy;
2026
<span class=td-footer__authors>Antoine Glacet</span></span><span class=td-footer__all_rights_reserved>All Rights Reserved</span></div></div></div></footer></div><script src=/js/main.min.258190f24d50bde9095e369c0cd7315407f95e1da5f39472b3850b40279a9e08.js integrity="sha256-JYGQ8k1QvekJXjacDNcxVAf5Xh2l85Rys4ULQCeangg=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>