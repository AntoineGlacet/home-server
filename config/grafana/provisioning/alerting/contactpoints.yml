apiVersion: 1

# Contact Points - Where alerts are sent
contactPoints:
   - orgId: 1
     name: discord
     type: discord
     uid: discord-home-server
     disableResolveMessage: false
     settings:
       url: ${DISCORD_WEBHOOK_URL}
       message: |
         **{{ .Status | toUpper }}{{ if eq .Status "firing" }} ðŸ”¥{{ else }} âœ…{{ end }}**

         {{ range .Alerts }}
         **Alert:** {{ .Labels.alertname }}
         **Severity:** {{ .Labels.severity }}
         {{ if .Labels.category }}**Category:** {{ .Labels.category }}{{ end }}

         **Summary:** {{ .Annotations.summary }}
         {{ if .Annotations.description }}**Description:** {{ .Annotations.description }}{{ end }}

         {{ if .Labels.instance }}**Instance:** {{ .Labels.instance }}{{ end }}
         {{ if .Labels.job }}**Job:** {{ .Labels.job }}{{ end }}

         **Started:** {{ .StartsAt.Format "2006-01-02 15:04:05 MST" }}
         {{ if .EndsAt }}**Ended:** {{ .EndsAt.Format "2006-01-02 15:04:05 MST" }}{{ end }}

         {{ if .DashboardURL }}[View Dashboard]({{ .DashboardURL }}){{ end }}
         {{ if .PanelURL }}[View Panel]({{ .PanelURL }}){{ end }}
         {{ if .SilenceURL }}[Silence Alert]({{ .SilenceURL }}){{ end }}
         {{ end }}
       title: |
         {{ if eq .Status "firing" }}ðŸš¨ {{ .Alerts.Firing | len }} Alert(s) Firing{{ else }}âœ… {{ .Alerts.Resolved | len }} Alert(s) Resolved{{ end }}
       use_discord_username: false
