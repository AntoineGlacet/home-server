<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Alerting Migration to Grafana | Home Server Documentation</title><meta name=description content="Migration guide for moving alerting from Prometheus to Grafana"><meta property="og:url" content="https://docs.antoineglacet.com/docs/deployment/alerting_migration/"><meta property="og:site_name" content="Home Server Documentation"><meta property="og:title" content="Alerting Migration to Grafana"><meta property="og:description" content="Migration guide for moving alerting from Prometheus to Grafana"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta itemprop=name content="Alerting Migration to Grafana"><meta itemprop=description content="Migration guide for moving alerting from Prometheus to Grafana"><meta itemprop=wordCount content="1580"><meta name=twitter:card content="summary"><meta name=twitter:title content="Alerting Migration to Grafana"><meta name=twitter:description content="Migration guide for moving alerting from Prometheus to Grafana"><link rel=preload href=/scss/main.min.6d849f713d8c25ed95d783569522ad6e1604c48142bc1d1ab44b4a15795b3046.css as=style integrity="sha256-bYSfcT2MJe2V14NWlSKtbhYExIFCvB0atEtKFXlbMEY=" crossorigin=anonymous><link href=/scss/main.min.6d849f713d8c25ed95d783569522ad6e1604c48142bc1d1ab44b4a15795b3046.css rel=stylesheet integrity="sha256-bYSfcT2MJe2V14NWlSKtbhYExIFCvB0atEtKFXlbMEY=" crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script></head><body class=td-page><header><nav class="td-navbar js-navbar-scroll" data-bs-theme=dark><div class="td-navbar-container container-fluid flex-column flex-md-row"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"></span><span class=navbar-brand__name>Home Server Documentation</span></a><div class="td-navbar-nav-scroll td-navbar-nav-scroll--indicator" id=main_navbar><div class="scroll-indicator scroll-left"></div><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/docs/><span>Documentation</span></a></li><li class=nav-item><a class="nav-link active" href=/docs/><span>Docs</span></a></li><li class=nav-item><a class=nav-link href=https://homepage.antoineglacet.com target=_blank rel=noopener><span>Homepage</span></a></li></ul><div class="scroll-indicator scroll-right"></div></div><div class="d-none d-lg-block td-navbar__search"></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main data-bs-spy=scroll data-bs-target=.td-toc data-bs-root-margin="0px 0px -10%"><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><script>$(function(){$("#td-section-nav a").removeClass("active"),$("#td-section-nav #m-docsdeploymentalerting_migration").addClass("active"),$("#td-section-nav #m-docsdeploymentalerting_migration-li span").addClass("td-sidebar-nav-active-item"),$("#td-section-nav #m-docsdeploymentalerting_migration").parents("li").addClass("active-path"),$("#td-section-nav li.active-path").addClass("show"),$("#td-section-nav li.active-path").children("input").prop("checked",!0),$("#td-section-nav #m-docsdeploymentalerting_migration-li").siblings("li").addClass("show"),$("#td-section-nav #m-docsdeploymentalerting_migration-li").children("ul").children("li").addClass("show"),$("#td-sidebar-menu").toggleClass("d-none")})</script><div id=td-sidebar-menu class="td-sidebar__inner d-none"><form class="td-sidebar__search d-flex align-items-center"><button class="btn btn-link td-sidebar__toggle" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="td-sidebar-nav collapse foldable-nav" id=td-section-nav><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docs-li><a href=/docs/ title=Documentation class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Docs</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsoperations-li><input type=checkbox id=m-docsoperations-check>
<label for=m-docsoperations-check><a href=/docs/operations/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsoperations><span>Operations</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsoperationsoperating-li><input type=checkbox id=m-docsoperationsoperating-check>
<label for=m-docsoperationsoperating-check><a href=/docs/operations/operating/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsoperating><span>Operating Guide</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsoperationsquick_start-li><input type=checkbox id=m-docsoperationsquick_start-check>
<label for=m-docsoperationsquick_start-check><a href=/docs/operations/quick_start/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsquick_start><span>Quick Start: Fix SSH Lag & LAN Latency</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsoperationsperformance-tuning-li><input type=checkbox id=m-docsoperationsperformance-tuning-check>
<label for=m-docsoperationsperformance-tuning-check><a href=/docs/operations/performance-tuning/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsperformance-tuning><span>Performance Tuning Guide</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsoperationsperformance_optimization-li><input type=checkbox id=m-docsoperationsperformance_optimization-check>
<label for=m-docsoperationsperformance_optimization-check><a href=/docs/operations/performance_optimization/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsoperationsperformance_optimization><span>Performance Optimization Guide</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsinfrastructure-li><input type=checkbox id=m-docsinfrastructure-check>
<label for=m-docsinfrastructure-check><a href=/docs/infrastructure/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsinfrastructure><span>Infrastructure</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsinfrastructuretraefik-li><input type=checkbox id=m-docsinfrastructuretraefik-check>
<label for=m-docsinfrastructuretraefik-check><a href=/docs/infrastructure/traefik/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsinfrastructuretraefik><span>Traefik - Reverse Proxy & TLS</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsinfrastructureauthentik-li><input type=checkbox id=m-docsinfrastructureauthentik-check>
<label for=m-docsinfrastructureauthentik-check><a href=/docs/infrastructure/authentik/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsinfrastructureauthentik><span>Authentik - SSO & Authentication</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsmonitoring-li><input type=checkbox id=m-docsmonitoring-check>
<label for=m-docsmonitoring-check><a href=/docs/monitoring/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsmonitoring><span>Monitoring</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsmonitoringmonitoring-li><input type=checkbox id=m-docsmonitoringmonitoring-check>
<label for=m-docsmonitoringmonitoring-check><a href=/docs/monitoring/monitoring/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsmonitoringmonitoring><span>Monitoring & Observability</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsmonitoringgrafana-setup-li><input type=checkbox id=m-docsmonitoringgrafana-setup-check>
<label for=m-docsmonitoringgrafana-setup-check><a href=/docs/monitoring/grafana-setup/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsmonitoringgrafana-setup><span>Grafana Setup Guide</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docstroubleshooting-li><input type=checkbox id=m-docstroubleshooting-check>
<label for=m-docstroubleshooting-check><a href=/docs/troubleshooting/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docstroubleshooting><span>Troubleshooting</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstroubleshootingtroubleshooting-li><input type=checkbox id=m-docstroubleshootingtroubleshooting-check>
<label for=m-docstroubleshootingtroubleshooting-check><a href=/docs/troubleshooting/troubleshooting/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docstroubleshootingtroubleshooting><span>Troubleshooting Guide</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsdeployment-li><input type=checkbox id=m-docsdeployment-check>
<label for=m-docsdeployment-check><a href=/docs/deployment/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsdeployment><span>Deployment</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdeploymentdeployment_checklist-li><input type=checkbox id=m-docsdeploymentdeployment_checklist-check>
<label for=m-docsdeploymentdeployment_checklist-check><a href=/docs/deployment/deployment_checklist/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdeploymentdeployment_checklist><span>Deployment Checklist - Infrastructure Improvements</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdeploymentpost-commit-steps-li><input type=checkbox id=m-docsdeploymentpost-commit-steps-check>
<label for=m-docsdeploymentpost-commit-steps-check><a href=/docs/deployment/post-commit-steps/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdeploymentpost-commit-steps><span>Post-Commit Setup Steps</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdeploymentdeployment_notes-li><input type=checkbox id=m-docsdeploymentdeployment_notes-check>
<label for=m-docsdeploymentdeployment_notes-check><a href=/docs/deployment/deployment_notes/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdeploymentdeployment_notes><span>Deployment Notes - 2026-01-16</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdeploymenthugo-site-setup-li><input type=checkbox id=m-docsdeploymenthugo-site-setup-check>
<label for=m-docsdeploymenthugo-site-setup-check><a href=/docs/deployment/hugo-site-setup/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdeploymenthugo-site-setup><span>Hugo Documentation Site - Setup Guide</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdeploymentalerting_migration-li><input type=checkbox id=m-docsdeploymentalerting_migration-check>
<label for=m-docsdeploymentalerting_migration-check><a href=/docs/deployment/alerting_migration/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdeploymentalerting_migration><span>Alerting Migration to Grafana</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsdeploymentreadme-li><input type=checkbox id=m-docsdeploymentreadme-check>
<label for=m-docsdeploymentreadme-check><a href=/docs/deployment/readme/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsdeploymentreadme><span></span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsplanning-li><input type=checkbox id=m-docsplanning-check>
<label for=m-docsplanning-check><a href=/docs/planning/ title="Planning & Status" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsplanning><span>Planning</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsplanningimplementation_status-li><input type=checkbox id=m-docsplanningimplementation_status-check>
<label for=m-docsplanningimplementation_status-check><a href=/docs/planning/implementation_status/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsplanningimplementation_status><span>Implementation Status - Home Server Improvements</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsplanningnext_steps-li><input type=checkbox id=m-docsplanningnext_steps-check>
<label for=m-docsplanningnext_steps-check><a href=/docs/planning/next_steps/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsplanningnext_steps><span>Next Steps - Alerting Migration Testing</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsplanningsecurity_remediation-li><input type=checkbox id=m-docsplanningsecurity_remediation-check>
<label for=m-docsplanningsecurity_remediation-check><a href=/docs/planning/security_remediation/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsplanningsecurity_remediation><span>Security Remediation: Discord Webhook Leak</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsplanningreadme-li><input type=checkbox id=m-docsplanningreadme-check>
<label for=m-docsplanningreadme-check><a href=/docs/planning/readme/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsplanningreadme><span></span></a></label></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"></div><div class=td-toc data-proofer-ignore><div class=td-toc-title><span class=td-toc-title__text>On this page</span>
<a class=td-toc-title__link title="Top of page" href=#></a></div><nav id=TableOfContents><ul><li><a href=#-what-changed>ğŸ¯ What Changed</a><ul><li><a href=#before-old-stack>Before (Old Stack)</a></li><li><a href=#after-new-stack>After (New Stack)</a></li></ul></li><li><a href=#-new-file-structure>ğŸ“‚ New File Structure</a><ul><li><a href=#what-each-file-does>What Each File Does</a></li></ul></li><li><a href=#-alert-rules-migrated>ğŸš¨ Alert Rules Migrated</a><ul><li><a href=#from-prometheus-converted>From Prometheus (Converted)</a></li><li><a href=#new-performancelatency-alerts>NEW Performance/Latency Alerts</a></li></ul></li><li><a href=#-discord-message-format>ğŸ¨ Discord Message Format</a></li><li><a href=#-configuration-details>ğŸ”§ Configuration Details</a><ul><li><a href=#notification-policies>Notification Policies</a></li><li><a href=#datasource-configuration>Datasource Configuration</a></li></ul></li><li><a href=#-migration-steps-performed>ğŸš€ Migration Steps Performed</a><ul><li><a href=#1-created-provisioning-files>1. Created Provisioning Files</a></li><li><a href=#2-updated-docker-compose>2. Updated Docker Compose</a></li><li><a href=#3-updated-prometheus-config>3. Updated Prometheus Config</a></li><li><a href=#4-preserved-configurations>4. Preserved Configurations</a></li></ul></li><li><a href=#-validation-steps>âœ… Validation Steps</a><ul><li><a href=#1-check-grafana-provisioning>1. Check Grafana Provisioning</a></li><li><a href=#2-check-contact-point>2. Check Contact Point</a></li><li><a href=#3-check-alert-rules>3. Check Alert Rules</a></li><li><a href=#4-test-alert>4. Test Alert</a></li></ul></li><li><a href=#-rollback-procedure>ğŸ”„ Rollback Procedure</a><ul><li><a href=#option-a-quick-rollback>Option A: Quick Rollback</a></li><li><a href=#option-b-keep-grafana-alerting-re-add-alertmanager>Option B: Keep Grafana Alerting, Re-add Alertmanager</a></li></ul></li><li><a href=#-resource-impact>ğŸ“Š Resource Impact</a><ul><li><a href=#before-migration>Before Migration</a></li><li><a href=#after-migration>After Migration</a></li></ul></li><li><a href=#-how-to-add-new-alerts>ğŸ“ How to Add New Alerts</a><ul><li><a href=#method-1-via-grafana-ui-recommended>Method 1: Via Grafana UI (Recommended)</a></li><li><a href=#method-2-via-provisioning-infrastructure-as-code>Method 2: Via Provisioning (Infrastructure as Code)</a></li></ul></li><li><a href=#-troubleshooting>ğŸ” Troubleshooting</a><ul><li><a href=#alerts-not-firing>Alerts Not Firing</a></li><li><a href=#discord-not-receiving-messages>Discord Not Receiving Messages</a></li><li><a href=#prometheus-datasource-not-found>Prometheus Datasource Not Found</a></li></ul></li><li><a href=#-references>ğŸ“š References</a></li><li><a href=#-maintenance-notes>ğŸ“ Maintenance Notes</a><ul><li><a href=#regular-tasks>Regular Tasks</a></li><li><a href=#backup-strategy>Backup Strategy</a></li></ul></li><li><a href=#-benefits-realized>ğŸ‰ Benefits Realized</a></li><li><a href=#-completed-tasks-2026-01-17>âœ… Completed Tasks (2026-01-17)</a><ul><li><a href=#automated-tasks---done->Automated Tasks - DONE âœ…</a></li><li><a href=#manual-tasks---to-do-by-user->Manual Tasks - TO DO BY USER ğŸ”´</a></li><li><a href=#next-steps-optional>Next Steps (Optional)</a></li><li><a href=#known-non-issues>Known Non-Issues</a></li></ul></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/docs/>Docs</a></li><li class=breadcrumb-item><a href=/docs/deployment/>Deployment</a></li><li class="breadcrumb-item active" aria-current=page>Alerting Migration to Grafana</li></ol></nav><div class=td-content><h1>Alerting Migration to Grafana</h1><div class=lead>Migration guide for moving alerting from Prometheus to Grafana</div><header class=article-meta></header><p><strong>Date</strong>: 2026-01-17<br><strong>Migration</strong>: Prometheus Alertmanager â†’ Grafana Unified Alerting<br><strong>Status</strong>: âœ… Provisioning Complete - Ready for Testing</p><hr><h2 id=-what-changed>ğŸ¯ What Changed</h2><h3 id=before-old-stack>Before (Old Stack)</h3><pre tabindex=0><code>Prometheus â†’ Alertmanager â†’ alertmanager-discord â†’ Discord
              (container)      (container)
</code></pre><p><strong>Issues</strong>:</p><ul><li>2 extra containers just for alerting</li><li>Separate configuration (Alertmanager YAML)</li><li>Limited templating capabilities</li><li>Discord plugin needed maintenance</li><li>Split monitoring (Prometheus rules, Alertmanager routing)</li></ul><h3 id=after-new-stack>After (New Stack)</h3><pre tabindex=0><code>Prometheus â†’ Grafana Alerting â†’ Discord
   (metrics)    (built-in)      (native)
</code></pre><p><strong>Benefits</strong>:</p><ul><li>âœ… <strong>-2 containers</strong> removed (alertmanager, alertmanager-discord)</li><li>âœ… <strong>Unified configuration</strong> - all in Grafana provisioning</li><li>âœ… <strong>Better templating</strong> - full Grafana template support</li><li>âœ… <strong>Native Discord</strong> - no external plugin needed</li><li>âœ… <strong>Configuration as Code</strong> - fully provisioned via YAML</li><li>âœ… <strong>Easier management</strong> - all alerts in Grafana UI</li><li>âœ… <strong>Simpler architecture</strong> - one less moving part</li></ul><hr><h2 id=-new-file-structure>ğŸ“‚ New File Structure</h2><p>All alerting configuration is now in:</p><pre tabindex=0><code>config/grafana/provisioning/alerting/
â”œâ”€â”€ contactpoints.yml    # Discord webhook configuration
â”œâ”€â”€ policies.yml         # Notification routing rules
â”œâ”€â”€ templates.yml        # Message templates
â””â”€â”€ rules.yml            # All alert rules (converted + new ones)
</code></pre><h3 id=what-each-file-does>What Each File Does</h3><h4 id=contactpointsyml><code>contactpoints.yml</code></h4><ul><li>Defines WHERE alerts are sent (Discord webhook)</li><li>Uses environment variable: <code>${DISCORD_WEBHOOK_URL}</code></li><li>Configures message formatting</li></ul><h4 id=policiesyml><code>policies.yml</code></h4><ul><li>Defines HOW alerts are routed</li><li>Group alerts by severity</li><li><strong>No repeat intervals</strong> (as per your requirement)</li><li>Separate handling for critical vs warning</li></ul><h4 id=templatesyml><code>templates.yml</code></h4><ul><li>Custom message templates for Discord</li><li>Reusable across multiple alerts</li><li>Better formatting than alertmanager-discord</li></ul><h4 id=rulesyml><code>rules.yml</code></h4><ul><li><strong>ALL alert rules</strong> in one place</li><li>Converted from Prometheus format</li><li><strong>NEW performance/latency alerts</strong> added</li><li>Organized into logical groups</li></ul><hr><h2 id=-alert-rules-migrated>ğŸš¨ Alert Rules Migrated</h2><h3 id=from-prometheus-converted>From Prometheus (Converted)</h3><p><strong>System Alerts</strong> (7 rules):</p><ul><li>High Memory Usage</li><li>Critical Memory Usage</li><li>High Swap Usage</li><li>Root Disk Space Warning/Critical</li><li>Data Disk Space Warning/Critical</li><li>Filesystem Read-Only</li></ul><p><strong>Container Alerts</strong> (3 rules):</p><ul><li>Container Down</li><li>Container High CPU</li><li>Container High Memory</li></ul><p><strong>Infrastructure Alerts</strong> (4 rules):</p><ul><li>High System Load</li><li>Critical System Load</li><li>High Disk I/O Wait</li><li>Node Exporter Down</li></ul><p><strong>Service Alerts</strong> (3 rules):</p><ul><li>Prometheus Scrape Failure</li><li>Loki Down</li></ul><p><strong>Total from Prometheus</strong>: 17 rules</p><h3 id=new-performancelatency-alerts>NEW Performance/Latency Alerts</h3><p>These are <strong>brand new</strong> alerts we discussed to prevent the SSH lag issue:</p><ol><li><p><strong>CPU Governor Not in Performance Mode</strong> âš¡</p><ul><li>Triggers if any CPU is not in &ldquo;performance&rdquo; mode</li><li><strong>Critical</strong> - causes severe latency</li><li>Detection time: 1 minute</li></ul></li><li><p><strong>High Swap I/O Rate</strong> ğŸ’¾</p><ul><li>Monitors actual swap activity (not just usage)</li><li><strong>Warning</strong> - system may be thrashing</li><li>Detection time: 5 minutes</li><li>Threshold: >1000 pages/sec</li></ul></li><li><p><strong>Critical Swap Thrashing</strong> ğŸ”¥</p><ul><li>Severe swap I/O activity</li><li><strong>Critical</strong> - system likely unresponsive</li><li>Detection time: 2 minutes</li><li>Threshold: >5000 pages/sec</li></ul></li><li><p><strong>Memory Pressure with High Inactive Pages</strong> ğŸ§ </p><ul><li>Low free memory + high inactive memory</li><li><strong>Warning</strong> - swappiness may need tuning</li><li>Detection time: 5 minutes</li><li>Suggests: increase vm.swappiness</li></ul></li><li><p><strong>Sustained High I/O Wait</strong> â±ï¸</p><ul><li>Faster detection than original (3min vs 10min)</li><li><strong>Warning</strong> - may indicate swap or disk issues</li><li>Threshold: >15% I/O wait</li></ul></li><li><p><strong>Sudden Load Spike</strong> ğŸ“ˆ</p><ul><li>1-min load 50%+ higher than 5-min average</li><li><strong>Warning</strong> - interactive latency proxy</li><li>Detection time: 1 minute</li></ul></li></ol><p><strong>Total NEW alerts</strong>: 6 rules<br><strong>Grand Total</strong>: 23 alert rules</p><hr><h2 id=-discord-message-format>ğŸ¨ Discord Message Format</h2><p>Alerts now appear in Discord with this format:</p><pre tabindex=0><code>ğŸš¨ ALERT FIRING

**Alert:** Critical Memory Usage
**Severity:** CRITICAL
**Category:** system

**Summary:** Critical memory shortage on 172.17.0.1:9100
**Description:** Less than 512MB RAM available (311MB free). 
System may start OOM killing processes.

**Instance:** `172.17.0.1:9100`
**Job:** `node_exporter`

**Started:** 2026-01-17 12:15:30 JST

[View Dashboard] [View Panel] [Silence Alert]
---
</code></pre><p>When resolved:</p><pre tabindex=0><code>âœ… ALERT RESOLVED
(same format with green checkmark)
</code></pre><hr><h2 id=-configuration-details>ğŸ”§ Configuration Details</h2><h3 id=notification-policies>Notification Policies</h3><p><strong>Routing</strong>:</p><ul><li><strong>Critical alerts</strong>: Send immediately (5s wait), don&rsquo;t repeat</li><li><strong>Warning alerts</strong>: Send after 10s, don&rsquo;t repeat</li><li><strong>Grouping</strong>: By <code>alertname</code> and <code>severity</code></li></ul><p><strong>No Repeat Policy</strong>:
As per your requirement, alerts fire <strong>ONCE</strong> and don&rsquo;t repeat.</p><ul><li><code>repeat_interval: 0</code> for critical</li><li><code>repeat_interval: 0</code> for warnings</li></ul><h3 id=datasource-configuration>Datasource Configuration</h3><p>Alerts query <strong>Prometheus</strong> data source:</p><ul><li>UID: <code>prometheus</code> (must match your datasource)</li><li>All queries use PromQL</li><li>Time ranges configured per alert</li></ul><hr><h2 id=-migration-steps-performed>ğŸš€ Migration Steps Performed</h2><h3 id=1-created-provisioning-files>1. Created Provisioning Files</h3><ul><li><input checked disabled type=checkbox> Created <code>/config/grafana/provisioning/alerting/</code> directory</li><li><input checked disabled type=checkbox> Added <code>contactpoints.yml</code> with Discord config</li><li><input checked disabled type=checkbox> Added <code>policies.yml</code> with routing rules</li><li><input checked disabled type=checkbox> Added <code>templates.yml</code> for message formatting</li><li><input checked disabled type=checkbox> Added <code>rules.yml</code> with all 23 alert rules</li></ul><h3 id=2-updated-docker-compose>2. Updated Docker Compose</h3><ul><li><input checked disabled type=checkbox> Removed <code>alertmanager</code> service</li><li><input checked disabled type=checkbox> Removed <code>alertmanager-discord</code> service</li><li><input checked disabled type=checkbox> Added <code>DISCORD_WEBHOOK_URL</code> to Grafana environment</li><li><input checked disabled type=checkbox> Added <code>GF_UNIFIED_ALERTING_ENABLED=true</code></li><li><input checked disabled type=checkbox> Backed up original: <code>docker-compose.yml.backup-before-alerting-migration-YYYYMMDD</code></li></ul><h3 id=3-updated-prometheus-config>3. Updated Prometheus Config</h3><ul><li><input checked disabled type=checkbox> Removed alertmanager configuration</li><li><input checked disabled type=checkbox> Commented out rule_files (not needed, Grafana handles)</li><li><input checked disabled type=checkbox> Added comments explaining new setup</li></ul><h3 id=4-preserved-configurations>4. Preserved Configurations</h3><ul><li><input checked disabled type=checkbox> Old Prometheus <code>alerts.yml</code> kept for reference</li><li><input checked disabled type=checkbox> Old Alertmanager config kept in <code>config/alertmanager/</code></li><li><input checked disabled type=checkbox> Can roll back if needed</li></ul><hr><h2 id=-validation-steps>âœ… Validation Steps</h2><p>After applying changes, verify:</p><h3 id=1-check-grafana-provisioning>1. Check Grafana Provisioning</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Grafana should load all provisioning files on startup</span>
</span></span><span style=display:flex><span>docker logs grafana <span style=color:#000;font-weight:700>|</span> grep -i <span style=color:#4e9a06>&#34;provision&#34;</span>
</span></span></code></pre></div><p>Expected output:</p><pre tabindex=0><code>Provisioning alerting from configuration
Contact points provisioned: 1
Notification policies provisioned: 1
Alert rules provisioned: 23
</code></pre><h3 id=2-check-contact-point>2. Check Contact Point</h3><ol><li>Open Grafana UI</li><li>Go to <strong>Alerting</strong> â†’ <strong>Contact points</strong></li><li>Should see <code>discord</code> contact point</li><li>Click <strong>Test</strong> to send test message</li></ol><h3 id=3-check-alert-rules>3. Check Alert Rules</h3><ol><li>Go to <strong>Alerting</strong> â†’ <strong>Alert rules</strong></li><li>Should see 6 folders:<ul><li>System (performance alerts)</li><li>System (memory alerts)</li><li>System (disk alerts)</li><li>Containers</li><li>Services</li></ul></li><li>Total: 23 alert rules</li></ol><h3 id=4-test-alert>4. Test Alert</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Temporarily set CPU governor to powersave to test alert</span>
</span></span><span style=display:flex><span>sudo cpupower frequency-set -g powersave
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Wait 1 minute, should receive Discord alert</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Set back to performance</span>
</span></span><span style=display:flex><span>sudo cpupower frequency-set -g performance
</span></span></code></pre></div><hr><h2 id=-rollback-procedure>ğŸ”„ Rollback Procedure</h2><p>If you need to revert to the old setup:</p><h3 id=option-a-quick-rollback>Option A: Quick Rollback</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#204a87>cd</span> ~/home-server
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Restore docker-compose.yml</span>
</span></span><span style=display:flex><span>cp docker-compose.yml.backup-before-alerting-migration-* docker-compose.yml
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Recreate containers</span>
</span></span><span style=display:flex><span>docker compose up -d
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Restart Prometheus with original config</span>
</span></span><span style=display:flex><span>docker restart prometheus
</span></span></code></pre></div><h3 id=option-b-keep-grafana-alerting-re-add-alertmanager>Option B: Keep Grafana Alerting, Re-add Alertmanager</h3><ol><li>Uncomment alertmanager sections in docker-compose.yml</li><li>Run <code>docker compose up -d</code></li><li>Both systems can run in parallel</li></ol><hr><h2 id=-resource-impact>ğŸ“Š Resource Impact</h2><h3 id=before-migration>Before Migration</h3><pre tabindex=0><code>Containers: 41 total
â”œâ”€ alertmanager: ~20MB RAM
â”œâ”€ alertmanager-discord: ~5MB RAM
â””â”€ Total: ~25MB RAM
</code></pre><h3 id=after-migration>After Migration</h3><pre tabindex=0><code>Containers: 39 total (-2)
â””â”€ Grafana handles alerting (no extra RAM)

Savings: ~25MB RAM, 2 fewer containers to maintain
</code></pre><hr><h2 id=-how-to-add-new-alerts>ğŸ“ How to Add New Alerts</h2><h3 id=method-1-via-grafana-ui-recommended>Method 1: Via Grafana UI (Recommended)</h3><ol><li>Go to <strong>Alerting</strong> â†’ <strong>Alert rules</strong></li><li>Click <strong>New alert rule</strong></li><li>Configure query, condition, labels</li><li>Save</li></ol><p><strong>Note</strong>: UI-created alerts are stored in Grafana&rsquo;s database, not in provisioning files. For Infrastructure-as-Code, use Method 2.</p><h3 id=method-2-via-provisioning-infrastructure-as-code>Method 2: Via Provisioning (Infrastructure as Code)</h3><ol><li>Edit <code>/config/grafana/provisioning/alerting/rules.yml</code></li><li>Add new rule to appropriate group</li><li>Restart Grafana: <code>docker restart grafana</code></li></ol><p><strong>Example</strong>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>- <span style=color:#204a87;font-weight:700>uid</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>my-new-alert</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>title</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>My New Alert</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>condition</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>C</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>data</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span>- <span style=color:#204a87;font-weight:700>refId</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>A</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>datasourceUid</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>prometheus</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>model</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>expr</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>my_metric &gt; 100</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>refId</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>A</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span>- <span style=color:#204a87;font-weight:700>refId</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>C</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>datasourceUid</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>__expr__</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>      </span><span style=color:#204a87;font-weight:700>model</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>expression</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>A</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>refId</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>C</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>        </span><span style=color:#204a87;font-weight:700>type</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>classic_conditions</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>for</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>5m</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>annotations</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>summary</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;Alert fired!&#34;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>description</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#4e9a06>&#34;Metric exceeded threshold&#34;</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>  </span><span style=color:#204a87;font-weight:700>labels</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8>
</span></span></span><span style=display:flex><span><span style=color:#f8f8f8>    </span><span style=color:#204a87;font-weight:700>severity</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8> </span><span style=color:#000>warning</span><span style=color:#f8f8f8>
</span></span></span></code></pre></div><hr><h2 id=-troubleshooting>ğŸ” Troubleshooting</h2><h3 id=alerts-not-firing>Alerts Not Firing</h3><p><strong>Check 1</strong>: Verify Prometheus datasource UID</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># In Grafana UI: Configuration â†’ Data sources â†’ Prometheus</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># UID should be &#34;prometheus&#34; (or update rules.yml if different)</span>
</span></span></code></pre></div><p><strong>Check 2</strong>: Check alert evaluation</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Grafana logs</span>
</span></span><span style=display:flex><span>docker logs grafana <span style=color:#000;font-weight:700>|</span> grep -i <span style=color:#4e9a06>&#34;alert\|eval&#34;</span>
</span></span></code></pre></div><p><strong>Check 3</strong>: Verify contact point</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Test Discord webhook directly</span>
</span></span><span style=display:flex><span>curl -X POST <span style=color:#4e9a06>&#34;</span><span style=color:#4e9a06>${</span><span style=color:#000>DISCORD_WEBHOOK_URL</span><span style=color:#4e9a06>}</span><span style=color:#4e9a06>&#34;</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  -H <span style=color:#4e9a06>&#34;Content-Type: application/json&#34;</span> <span style=color:#4e9a06>\
</span></span></span><span style=display:flex><span>  -d <span style=color:#4e9a06>&#39;{&#34;content&#34;: &#34;Test message from Grafana&#34;}&#39;</span>
</span></span></code></pre></div><h3 id=discord-not-receiving-messages>Discord Not Receiving Messages</h3><p><strong>Check 1</strong>: Webhook URL in environment</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Verify webhook is passed to Grafana</span>
</span></span><span style=display:flex><span>docker <span style=color:#204a87>exec</span> grafana env <span style=color:#000;font-weight:700>|</span> grep DISCORD
</span></span></code></pre></div><p><strong>Check 2</strong>: Contact point configuration</p><ul><li>UI: Alerting â†’ Contact points â†’ discord</li><li>Should show webhook URL (partially masked)</li></ul><p><strong>Check 3</strong>: Notification policy</p><ul><li>UI: Alerting â†’ Notification policies</li><li>Verify &ldquo;discord&rdquo; is the receiver</li></ul><h3 id=prometheus-datasource-not-found>Prometheus Datasource Not Found</h3><p><strong>Error</strong>: <code>datasource prometheus not found</code></p><p><strong>Fix</strong>:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Check datasource UID in Grafana UI</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Update config/grafana/provisioning/alerting/rules.yml</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># Replace &#34;prometheus&#34; with actual UID if different</span>
</span></span></code></pre></div><hr><h2 id=-references>ğŸ“š References</h2><ul><li><a href=https://grafana.com/docs/grafana/latest/alerting/>Grafana Alerting Docs</a></li><li><a href=https://grafana.com/docs/grafana/latest/alerting/set-up/provision-alerting-resources/>Provision Alerting Resources</a></li><li><a href=https://grafana.com/docs/grafana/latest/alerting/configure-notifications/manage-contact-points/integrations/configure-discord/>Discord Contact Point</a></li></ul><hr><h2 id=-maintenance-notes>ğŸ“ Maintenance Notes</h2><h3 id=regular-tasks>Regular Tasks</h3><p><strong>Weekly</strong>:</p><ul><li>Review fired alerts in Grafana UI</li><li>Check for false positives</li><li>Tune thresholds if needed</li></ul><p><strong>Monthly</strong>:</p><ul><li>Test Discord webhook (use built-in test button)</li><li>Review alert rule effectiveness</li><li>Update rules based on system changes</li></ul><p><strong>After System Changes</strong>:</p><ul><li>Adding new containers? Add monitoring alerts</li><li>Changing disk layout? Update filesystem alerts</li><li>Upgrading Grafana? Review changelog for alerting changes</li></ul><h3 id=backup-strategy>Backup Strategy</h3><p><strong>What to back up</strong>:</p><pre tabindex=0><code>config/grafana/provisioning/alerting/
â”œâ”€â”€ contactpoints.yml
â”œâ”€â”€ policies.yml
â”œâ”€â”€ templates.yml
â””â”€â”€ rules.yml
</code></pre><p><strong>Automated backup</strong>: Included in your existing <code>duplicati</code> backup of ~/home-server/config/</p><hr><h2 id=-benefits-realized>ğŸ‰ Benefits Realized</h2><ol><li>âœ… <strong>Simpler stack</strong> - removed 2 containers</li><li>âœ… <strong>Better alerts</strong> - added 6 new performance alerts</li><li>âœ… <strong>Configuration as Code</strong> - all YAML-based</li><li>âœ… <strong>Unified management</strong> - everything in Grafana</li><li>âœ… <strong>Native Discord</strong> - no external bridge needed</li><li>âœ… <strong>Easier troubleshooting</strong> - one place to check</li><li>âœ… <strong>No repeat alerts</strong> - as requested</li><li>âœ… <strong>Proactive monitoring</strong> - catches SSH lag issues before they happen</li></ol><hr><p><strong>Last Updated</strong>: 2026-01-17<br><strong>Next Review</strong>: After first week of operation<br><strong>Status</strong>: âœ… Provisioning Complete - Manual Testing Required</p><hr><h2 id=-completed-tasks-2026-01-17>âœ… Completed Tasks (2026-01-17)</h2><h3 id=automated-tasks---done->Automated Tasks - DONE âœ…</h3><ol><li>âœ… Created all 4 provisioning files (contactpoints, policies, templates, rules)</li><li>âœ… Converted all 17 Prometheus alert rules to Grafana format</li><li>âœ… Added 6 new performance/latency alerts</li><li>âœ… Updated docker-compose.yml (removed alertmanager containers)</li><li>âœ… Updated Prometheus config (removed alertmanager references)</li><li>âœ… Added datasource UID to datasources.yml</li><li>âœ… Restarted Grafana container</li><li>âœ… Verified Grafana provisioning logs: &ldquo;finished to provision alerting&rdquo; âœ…</li></ol><h3 id=manual-tasks---to-do-by-user->Manual Tasks - TO DO BY USER ğŸ”´</h3><ol><li>ğŸ”´ <strong>Open Grafana UI</strong>: <a href=https://grafana.antoineglacet.com>https://grafana.antoineglacet.com</a></li><li>ğŸ”´ <strong>Navigate to</strong>: Alerting â†’ Contact points</li><li>ğŸ”´ <strong>Test Discord</strong>: Click &ldquo;Test&rdquo; button on <code>discord</code> contact point</li><li>ğŸ”´ <strong>Verify in Discord</strong>: Should receive test alert message</li><li>ğŸ”´ <strong>Check Alert Rules</strong>: Go to Alerting â†’ Alert rules (should see 23 rules)</li></ol><h3 id=next-steps-optional>Next Steps (Optional)</h3><ol start=6><li>âšª Trigger real alert test (temporarily set CPU governor to powersave)</li><li>âšª Monitor for first real alert to verify end-to-end flow</li><li>âšª Create Grafana dashboard for system health metrics</li></ol><h3 id=known-non-issues>Known Non-Issues</h3><ul><li>âš ï¸ Template errors in logs are <strong>EXPECTED</strong> when alerts are in NoData state</li><li>These errors will disappear once actual metric data flows through</li><li>Alerts will work correctly when conditions are met</li></ul></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=Homepage aria-label=Homepage><a target=_blank rel=noopener href=https://homepage.antoineglacet.com aria-label=Homepage><i class="fa fa-home"></i></a></li></ul></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"><span class=td-footer__copyright>&copy;
2026
<span class=td-footer__authors>Antoine Glacet</span></span><span class=td-footer__all_rights_reserved>All Rights Reserved</span></div></div></div></footer></div><script src=/js/main.min.258190f24d50bde9095e369c0cd7315407f95e1da5f39472b3850b40279a9e08.js integrity="sha256-JYGQ8k1QvekJXjacDNcxVAf5Xh2l85Rys4ULQCeangg=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js integrity="sha256-c0eKfUgHaYrtfjVesj+YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>